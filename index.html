<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>2025 Seoul Travel Guide</title>
  
  <!-- PWA è¨­å®š -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Seoul2025">
  <meta name="application-name" content="Seoul2025">
  <meta name="theme-color" content="#fdf8f9">
  <meta name="mobile-web-app-capable" content="yes">

  <!-- App Icons -->
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='512' height='512' viewBox='0 0 512 512'%3E%3Cdefs%3E%3ClinearGradient id='grad' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23fb7185;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23e11d48;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='512' height='512' rx='120' fill='url(%23grad)'/%3E%3Ctext x='50%25' y='42%25' dominant-baseline='middle' text-anchor='middle' font-family='sans-serif' font-weight='900' font-size='110' fill='white' style='text-shadow: 4px 4px 8px rgba(0,0,0,0.15)'%3ESEOUL%3C/text%3E%3Ctext x='50%25' y='65%25' dominant-baseline='middle' text-anchor='middle' font-family='sans-serif' font-weight='bold' font-size='90' fill='white' style='text-shadow: 3px 3px 6px rgba(0,0,0,0.15)'%3E2025%3C/text%3E%3Cpath d='M256 360 Q286 390 316 360 T376 360 Q406 390 376 420 T316 420 Q286 450 256 420 Q226 450 196 420 T136 420 Q106 390 136 360 T196 360 Q226 330 256 360' fill='none' stroke='white' stroke-width='8' stroke-linecap='round' opacity='0.3'/%3E%3C/svg%3E">
  <link rel="apple-touch-icon" sizes="180x180" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='512' height='512' viewBox='0 0 512 512'%3E%3Crect width='512' height='512' fill='%23fb7185'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-family='sans-serif' font-weight='bold' font-size='100' fill='white'%3ESEOUL%3C/text%3E%3C/svg%3E">
  <link rel="icon" type="image/svg+xml" sizes="192x192" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='512' height='512' viewBox='0 0 512 512'%3E%3Cdefs%3E%3ClinearGradient id='grad' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23fb7185;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23e11d48;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='512' height='512' rx='120' fill='url(%23grad)'/%3E%3Ctext x='50%25' y='42%25' dominant-baseline='middle' text-anchor='middle' font-family='sans-serif' font-weight='900' font-size='110' fill='white' style='text-shadow: 4px 4px 8px rgba(0,0,0,0.15)'%3ESEOUL%3C/text%3E%3Ctext x='50%25' y='65%25' dominant-baseline='middle' text-anchor='middle' font-family='sans-serif' font-weight='bold' font-size='90' fill='white' style='text-shadow: 3px 3px 6px rgba(0,0,0,0.15)'%3E2025%3C/text%3E%3Cpath d='M256 360 Q286 390 316 360 T376 360 Q406 390 376 420 T316 420 Q286 450 256 420 Q226 450 196 420 T136 420 Q106 390 136 360 T196 360 Q226 330 256 360' fill='none' stroke='white' stroke-width='8' stroke-linecap='round' opacity='0.3'/%3E%3C/svg%3E","sizes":"512x512","type":"image/svg+xml","purpose":"any maskable"}]}'>

  <!-- è¼‰å…¥ Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- è¼‰å…¥ Babel -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <style>
    body { font-family: sans-serif; background-color: #fdf8f9; user-select: none; -webkit-user-select: none; }
    .no-scrollbar::-webkit-scrollbar { display: none; }
    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    @keyframes fade-in {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .animate-fade-in { animation: fade-in 0.3s ease-out forwards; }
  </style>
</head>
<body>
  <div id="root"></div>

  <!-- React ç¨‹å¼ç¢¼ -->
  <script type="text/babel" data-type="module">
    import React, { useState, useEffect, useRef, useMemo } from 'https://esm.sh/react@18.2.0';
    import { createRoot } from 'https://esm.sh/react-dom@18.2.0/client';
    import { 
      Plane, Train, Bus, MapPin, Music, Coffee, Camera, Moon, Sun, Cloud, 
      Snowflake, Clock, Edit3, Globe, ChevronRight, Navigation, Footprints, 
      Utensils, ShoppingBag, BedDouble, Ticket, Home, Ship, Car, Sparkles, 
      MessageCircle, X, Send, Loader2, Languages, Bot, AlertTriangle, Volume2,
      ClipboardCheck, FileText, AlertCircle, Briefcase, Scan, CloudRain, Mic, Wand2, Plus, Save, Check, Trash2, Banknote, Search, XCircle, LayoutGrid, List, Image as ImageIcon, ArrowRight, CornerDownLeft
    } from 'https://esm.sh/lucide-react@0.263.1';

    // --- 1. Constants & Configuration ---
    const LANGUAGES = { ZH: 'ZH', KR: 'KR', EN: 'EN', JP: 'JP' };
    const UI_LABELS = {
      ZH: { title: '2025 é¦–çˆ¾ä¹‹æ—…', subtitle: 'åœ­è³¢æ¼”å”±æœƒãƒ»å†¬æ—¥é¦–çˆ¾', editTip: 'é»æ“Šæ–‡å­—å³å¯ç·¨è¼¯', days: ['æº–å‚™', 'Day 1', 'Day 2', 'Day 3', 'Day 4', 'Day 5', 'Day 6', 'Day 7'], shoppingTab: 'æ¡è³¼', transport: 'äº¤é€š', estTime: 'æ™‚é–“', location: 'åœ°é»', aiChat: 'AI éš¨èº«å°éŠ', genPhrases: 'éŸ“èªå¹«æ‰‹', phrasesTitle: 'âœ¨ æƒ…å¢ƒéŸ“èªå°å¹«æ‰‹', chatPlaceholder: 'å•å• AI...', close: 'é—œé–‰', fallbackMsg: 'AI é€£ç·šç•°å¸¸', addEvent: 'æ–°å¢è¡Œç¨‹', addModalTitle: 'æ–°å¢è¡Œç¨‹', addModalTime: 'æ™‚é–“ (24å°æ™‚åˆ¶)', addModalContent: 'åœ°é» / æ´»å‹•å…§å®¹', addModalSubmit: 'å„²å­˜ä¸¦æ’åº', addModalCancel: 'å–æ¶ˆ', addItem: 'æ–°å¢é …ç›®', splitBill: 'åˆ†å¸³', total: 'ç¸½æ”¯å‡º', perPerson: 'æ¯äººæ‡‰ä»˜', rate: 'åŒ¯ç‡', addPhrase: 'æ–°å¢è‡ªè¨‚çŸ­å¥', phraseMeaningPlaceholder: 'ä¸­æ–‡æ„æ€', shoppingList: 'æ¡è³¼æ¸…å–®', shoppingAdd: 'æ–°å¢å•†å“', shoppingName: 'å•†å“åç¨±', shoppingCategory: 'é¡åˆ¥ (å¦‚:ç¾å¦)', shoppingImage: 'åœ–ç‰‡ç¶²å€æˆ–ä¸Šå‚³', shoppingUpload: 'é¸æ“‡åœ–ç‰‡', shoppingViewList: 'æ¸…å–®æ¨¡å¼', shoppingViewGrid: 'åœ–ç‰‡æ¨¡å¼', shoppingTab: 'æ¡è³¼' },
      KR: { title: '2025 ì„œìš¸ ì—¬í–‰', subtitle: 'ê·œí˜„ ì½˜ì„œíŠ¸ â€¢ ê²¨ìš¸ ì„œìš¸', editTip: 'í´ë¦­í•˜ì—¬ í¸ì§‘', days: ['ì¤€ë¹„', '1ì¼ì°¨', '2ì¼ì°¨', '3ì¼ì°¨', '4ì¼ì°¨', '5ì¼ì°¨', '6ì¼ì°¨', '7ì¼ì°¨'], shoppingTab: 'ì‡¼í•‘', transport: 'êµí†µ', estTime: 'ì‹œê°„', location: 'ì¥ì†Œ', aiChat: 'AI ê°€ì´ë“œ', genPhrases: 'í•œêµ­ì–´ ë„ìš°ë¯¸', phrasesTitle: 'âœ¨ í•œêµ­ì–´', chatPlaceholder: 'ì§ˆë¬¸...', close: 'ë‹«ê¸°', fallbackMsg: 'AI ì˜¤ë¥˜', addEvent: 'ì¼ì • ì¶”ê°€', addModalTitle: 'ì¶”ê°€', addModalTime: 'ì‹œê°„', addModalContent: 'ë‚´ìš©', addModalSubmit: 'ì €ì¥', addModalCancel: 'ì·¨ì†Œ', addItem: 'í•­ëª© ì¶”ê°€', splitBill: 'ì •ì‚°', total: 'ì´ ì§€ì¶œ', perPerson: '1ì¸ë‹¹', rate: 'í™˜ìœ¨', addPhrase: 'ë¬¸êµ¬ ì¶”ê°€', phraseMeaningPlaceholder: 'ì˜ë¯¸', shoppingList: 'ì‡¼í•‘ ë¦¬ìŠ¤íŠ¸', shoppingAdd: 'ìƒí’ˆ ì¶”ê°€', shoppingName: 'ìƒí’ˆëª…', shoppingCategory: 'ì¹´í…Œê³ ë¦¬', shoppingImage: 'ì´ë¯¸ì§€', shoppingUpload: 'ì—…ë¡œë“œ', shoppingViewList: 'ë¦¬ìŠ¤íŠ¸', shoppingViewGrid: 'ê·¸ë¦¬ë“œ', shoppingTab: 'ì‡¼í•‘' },
      EN: { title: 'Seoul Trip 2025', subtitle: 'Kyuhyun Concert â€¢ Winter Seoul', editTip: 'Click to edit', days: ['Prep', 'Day 1', 'Day 2', 'Day 3', 'Day 4', 'Day 5', 'Day 6', 'Day 7'], shoppingTab: 'Shop', transport: 'Transport', estTime: 'Time', location: 'Loc', aiChat: 'AI Guide', genPhrases: 'Helper', phrasesTitle: 'âœ¨ Phrases', chatPlaceholder: 'Ask AI...', close: 'Close', fallbackMsg: 'AI Offline', addEvent: 'Add', addModalTitle: 'Add Event', addModalTime: 'Time', addModalContent: 'Content', addModalSubmit: 'Save', addModalCancel: 'Cancel', addItem: 'Add Item', splitBill: 'Split Bill', total: 'Total', perPerson: 'Per Person', rate: 'Rate', addPhrase: 'Add Phrase', phraseMeaningPlaceholder: 'Meaning', shoppingList: 'Shopping List', shoppingAdd: 'Add Item', shoppingName: 'Item Name', shoppingCategory: 'Category', shoppingImage: 'Image', shoppingUpload: 'Upload', shoppingViewList: 'List', shoppingViewGrid: 'Grid', shoppingTab: 'Shop' },
      JP: { title: '2025 ã‚½ã‚¦ãƒ«æ—…è¡Œ', subtitle: 'ã‚­ãƒ¥ãƒ’ãƒ§ãƒ³ã‚³ãƒ³ã‚µãƒ¼ãƒˆãƒ»å†¬ã®ã‚½ã‚¦ãƒ«', editTip: 'ã‚¯ãƒªãƒƒã‚¯ã—ã¦ç·¨é›†', days: ['æº–å‚™', '1æ—¥ç›®', '2æ—¥ç›®', '3æ—¥ç›®', '4æ—¥ç›®', '5æ—¥ç›®', '6æ—¥ç›®', '7æ—¥ç›®'], shoppingTab: 'è²·ã„ç‰©', transport: 'äº¤é€š', estTime: 'æ™‚é–“', location: 'å ´æ‰€', aiChat: 'AI ã‚¬ã‚¤ãƒ‰', genPhrases: 'éŸ“å›½èªãƒ˜ãƒ«ãƒ—', phrasesTitle: 'âœ¨ éŸ“å›½èª', chatPlaceholder: 'è³ªå•...', close: 'é–‰ã˜ã‚‹', fallbackMsg: 'AIã‚¨ãƒ©ãƒ¼', addEvent: 'è¿½åŠ ', addModalTitle: 'è¿½åŠ ', addModalTime: 'æ™‚é–“', addModalContent: 'å†…å®¹', addModalSubmit: 'ä¿å­˜', addModalCancel: 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«', addItem: 'è¿½åŠ ', splitBill: 'å‰²ã‚Šå‹˜', total: 'åˆè¨ˆ', perPerson: 'ä¸€äººå½“ãŸã‚Š', rate: 'ãƒ¬ãƒ¼ãƒˆ', addPhrase: 'ãƒ•ãƒ¬ãƒ¼ã‚ºè¿½åŠ ', phraseMeaningPlaceholder: 'æ„å‘³', shoppingList: 'è²·ã„ç‰©ãƒªã‚¹ãƒˆ', shoppingAdd: 'å•†å“è¿½åŠ ', shoppingName: 'å•†å“å', shoppingCategory: 'ã‚«ãƒ†ã‚´ãƒª', shoppingImage: 'ç”»åƒ', shoppingUpload: 'ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰', shoppingViewList: 'ãƒªã‚¹ãƒˆ', shoppingViewGrid: 'ã‚°ãƒªãƒƒãƒ‰', shoppingTab: 'è²·ã„ç‰©' }
    };

    const FALLBACK_PHRASES_BY_TYPE = {
      food: [ { k: 'ë©”ë‰´íŒ ì¢€ ì£¼ì„¸ìš”', p: 'Menyupan jom juseyo', m: { ZH: 'è«‹çµ¦æˆ‘èœå–®', EN: 'Menu please', JP: 'ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’ãã ã•ã„', KR: 'ë©”ë‰´íŒ ì¢€ ì£¼ì„¸ìš”' } }, { k: 'ì´ê±° ì£¼ì„¸ìš”', p: 'Ige juseyo', m: { ZH: 'è«‹çµ¦æˆ‘é€™å€‹', EN: 'This one please', JP: 'ã“ã‚Œã‚’ãã ã•ã„', KR: 'ì´ê±° ì£¼ì„¸ìš”' } }, { k: 'ê³„ì‚°í•´ ì£¼ì„¸ìš”', p: 'Gyesanhae juseyo', m: { ZH: 'è«‹çµå¸³', EN: 'Check please', JP: 'ãŠä¼šè¨ˆãŠé¡˜ã„ã—ã¾ã™', KR: 'ê³„ì‚°í•´ ì£¼ì„¸ìš”' } } ],
      shopping: [ { k: 'ì´ê±° ì–¼ë§ˆì˜ˆìš”?', p: 'Ige eolmayeyo?', m: { ZH: 'é€™å€‹å¤šå°‘éŒ¢?', EN: 'How much?', JP: 'ã„ãã‚‰ã§ã™ã‹ï¼Ÿ', KR: 'ì´ê±° ì–¼ë§ˆì˜ˆìš”?' } }, { k: 'ê¹ì•„ì£¼ì„¸ìš”', p: 'Kkakkajuseyo', m: { ZH: 'è«‹ç®—ä¾¿å®œä¸€é»', EN: 'Discount please', JP: 'å®‰ãã—ã¦ãã ã•ã„', KR: 'ê¹ì•„ì£¼ì„¸ìš”' } } ],
      transport: [ { k: 'ì—¬ê¸°ì„œ ë‚´ë ¤ì£¼ì„¸ìš”', p: 'Yeogiseo naeryeojuseyo', m: { ZH: 'è«‹åœ¨é€™è£¡ä¸‹è»Š', EN: 'Drop me here', JP: 'ã“ã“ã§é™ã‚ã—ã¦ãã ã•ã„', KR: 'ì—¬ê¸°ì„œ ë‚´ë ¤ì£¼ì„¸ìš”' } } ],
      default: [ { k: 'ì•ˆë…•í•˜ì„¸ìš”', p: 'Annyeonghaseyo', m: { ZH: 'ä½ å¥½', EN: 'Hello', JP: 'ã“ã‚“ã«ã¡ã¯', KR: 'ì•ˆë…•í•˜ì„¸ìš”' } }, { k: 'ê°ì‚¬í•©ë‹ˆë‹¤', p: 'Gamsahamnida', m: { ZH: 'è¬è¬', EN: 'Thank you', JP: 'ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™', KR: 'ê°ì‚¬í•©ë‹ˆë‹¤' } } ]
    };

    const PHRASE_DB = {
      food: FALLBACK_PHRASES_BY_TYPE.food,
      shopping: FALLBACK_PHRASES_BY_TYPE.shopping,
      transport: FALLBACK_PHRASES_BY_TYPE.transport,
      coffee: FALLBACK_PHRASES_BY_TYPE.coffee || [],
      default: FALLBACK_PHRASES_BY_TYPE.default
    };

    const SUBWAY_COLORS = {
      '1': '#0052A4', '2': '#00A84D', '3': '#EF7C1C', '4': '#00A5DE', '5': '#996CAC', '6': '#CD7C2F', '7': '#747F00', '8': '#E6186C', '9': '#BDB092',
      'AREX': '#0090D2', 'A': '#0090D2', 'K': '#77C4A3', 'B': '#E7E727', 'S': '#A71E31'
    };

    // --- 2. Helper Functions ---
    const getApiKeyFromStorage = () => ""; 
    const callGeminiAPI = async () => ({ success: false, error: "API Disabled" });
    const toObj = (item) => (typeof item === 'string' ? { text: item, checked: false } : item);
    const getFallbackPhrases = (type, lang) => {
        const list = PHRASE_DB[type] || PHRASE_DB.default;
        return list.map(item => ({ korean: item.k, pronunciation: item.p, meaning: item.m[lang] || item.m.EN || item.m.ZH }));
    };

    // --- 3. Data Loading Functions ---
    const getInitialItinerary = (lang) => {
      const commonDay0 = {
        ZH: { day: 0, date: 'å‡ºç™¼å‰', theme: 'è¡Œå‰æº–å‚™ & SeSç”³è«‹', activities: [{ title: 'å¿…å‚™è¡Œææ¸…å–®', type: 'checklist', desc: 'å‡ºç™¼å‰ç¢ºèª:', items: ['è­·ç…§/Esim', 'éŒ¢åŒ…', 'å……é›»å™¨', 'è½‰æ¥é ­', 'ç‰™åˆ·', 'è¡£ç‰©', 'ä¿æš–'].map(toObj) }, { title: 'SeS è‡ªå‹•é€šé—œç”³è«‹', type: 'ses', desc: 'ä»å·æ©Ÿå ´ T1 å…¥å¢ƒå¯©æŸ¥ F å€', items: ['åœ°é»ï¼šT1 å…¥å¢ƒå¯©æŸ¥ F å€', 'æ™‚é–“ï¼š07:00 - 18:00', 'æµç¨‹ï¼šæ‹ç…§/æŒ‡ç´‹ -> è‡ªå‹•é€šé—œ'].map(toObj) }] },
        KR: { day: 0, date: 'ì¶œë°œ ì „', theme: 'ì¤€ë¹„ & SeS', activities: [{ title: 'ì¤€ë¹„ë¬¼', type: 'checklist', desc: 'í™•ì¸:', items: ['ì—¬ê¶Œ', 'ì§€ê°‘', 'ì¶©ì „ê¸°', 'ì–´ëŒ‘í„°', 'ì„¸ë©´ë„êµ¬', 'ì˜·', 'ë³´ì˜¨'].map(toObj) }, { title: 'SeS ì‹ ì²­', type: 'ses', desc: 'ì¸ì²œê³µí•­ T1 Fêµ¬ì—­', items: ['ìœ„ì¹˜: T1 Fêµ¬ì—­', 'ì‹œê°„: 07:00-18:00', 'ì ˆì°¨: ë“±ë¡ -> ì‚¬ìš©'].map(toObj) }] },
        EN: { day: 0, date: 'Pre-trip', theme: 'Prep & SeS', activities: [{ title: 'Checklist', type: 'checklist', desc: 'Check:', items: ['Passport', 'Wallet', 'Charger', 'Adapter', 'Toiletries', 'Clothes', 'Warm'].map(toObj) }, { title: 'SeS Registration', type: 'ses', desc: 'Incheon T1 Area F', items: ['Loc: T1 Area F', 'Time: 07:00-18:00'].map(toObj) }] },
        JP: { day: 0, date: 'å‡ºç™ºå‰', theme: 'æº–å‚™ & SeS', activities: [{ title: 'æŒã¡ç‰©', type: 'checklist', desc: 'ç¢ºèª:', items: ['ãƒ‘ã‚¹ãƒãƒ¼ãƒˆ', 'è²¡å¸ƒ', 'å……é›»å™¨', 'å¤‰æ›ãƒ—ãƒ©ã‚°', 'æ´—é¢ç”¨å…·', 'æœ', 'é˜²å¯’'].map(toObj) }, { title: 'SeS ç™»éŒ²', type: 'ses', desc: 'ä»å·T1 Fã‚¨ãƒªã‚¢', items: ['å ´æ‰€ï¼šT1 Fã‚¨ãƒªã‚¢', 'æ™‚é–“ï¼š07:00-18:00'].map(toObj) }] }
      };

      const days_ZH = [
          { day: 1, date: '12/18 (å››)', theme: 'æŠµé”é¦–çˆ¾ & é£¯åº—å…¥ä½', activities: [{ time: '12:00', title: 'å¾æº«æš–çš„å®¶å‡ºç™¼', type: 'car', desc: 'é ç´„è‚¯é©›æ©Ÿå ´æ¥é€è‡³æ¡ƒåœ’æ©Ÿå ´ã€‚', location: 'Home', transport: 'å°ˆè»Š' }, { time: '15:15', title: 'é•·æ¦® BR160 èµ·é£›', type: 'flight', desc: 'æ¡ƒåœ’(TPE) -> ä»å·(ICN)', location: 'TPE Airport' }, { time: '18:45', title: 'æŠµé”ä»å·æ©Ÿå ´ & å…¥å¢ƒ', type: 'arrival', desc: 'å…¥å¢ƒã€é ˜è¡Œæã€è²· T-Moneyã€‚', location: 'ICN Airport' }, { time: '20:00', title: 'å‰å¾€ Wecostay Namsan', type: 'bus', desc: 'æ­ä¹˜ 6015 å·´å£«è‡³å¿ æ­¦è·¯ç«™ã€‚', info: 'è²»ç”¨: 17,000 KRW', transport: 'ä»å·æ©Ÿå ´ 5B/11B ç«™ç‰Œæ­ä¹˜ã€6015 æ©Ÿå ´å·´å£«ã€‘(å¾€æ˜æ´æ–¹å‘) -> (3ç«™ï¼Œç´„70åˆ†é˜) -> æ–¼ã€Œå¿ æ­¦è·¯ç«™ã€ä¸‹è»Šï¼Œä¸‹è»Šå¾Œå¾€å›èµ°ç´„ 2 åˆ†é˜å³é”ã€‚' }, { time: '21:30', title: 'é£¯åº— Check-in & æ™šé¤', type: 'food', desc: 'å…¥ä½å¾Œåƒç‚¸é›æˆ–éƒ¨éšŠé‹ã€‚', location: 'Chungmuro' }] },
           { day: 2, date: '12/19 (äº”)', theme: 'æ­·å²æ¼«æ­¥ & å‚³çµ±éŸ»å‘³', activities: [{ time: '10:00', title: 'åŒ—æ‘å…«æ™¯ & åŒ—æ‘éŸ“å±‹æ‘', type: 'sight', desc: 'æ¼«æ­¥æ–¼å‚³çµ±éŸ“å±‹ç¾¤ï¼Œå°‹æ‰¾åŒ—æ‘å…«æ™¯ã€‚', location: 'Bukchon', transport: '3è™Ÿç·š å¿ æ­¦è·¯ç«™ -> (å¾€å¤§åŒ–æ–¹å‘ï¼Œ3ç«™) -> å®‰åœ‹ç«™ (2è™Ÿå‡ºå£) -> å‡ºç«™å¾Œæ²¿è‘—åŒ—æ‘è·¯æ­¥è¡Œå³é”ã€‚' }, { time: '12:30', title: 'åŒ—æ‘ç™¾å¹´åœŸç¨®è”˜é›æ¹¯', type: 'food', desc: 'åŒ—æ‘é™„è¿‘çš„ç¾å‘³è”˜é›æ¹¯ã€‚', location: 'Bukchon', transport: 'å¾’æ­¥ï¼šå¾åŒ—æ‘éŸ“å±‹æ‘æ­¥è¡Œå‰å¾€ã€‚' }, { time: '14:30', title: 'æ™¯ç¦å®® & å…‰åŒ–é–€å»£å ´', type: 'sight', desc: 'åƒè§€å…‰åŒ–é–€èˆ‡æ™¯ç¦å®®ï¼Œæ¬£è³å®ˆé–€å°‡æ›å´—å„€å¼ã€‚', location: 'Gyeongbokgung', transport: 'å¾’æ­¥ï¼šå¾åŒ—æ‘å¾€è¥¿æ­¥è¡Œç´„ 15 åˆ†é˜å³å¯æŠµé”æ™¯ç¦å®®æ±å´ã€‚' }, { time: '17:00', title: 'LoL Park (GRAN SEOUL)', type: 'sight', desc: 'åƒè§€ LCK è–åœ°èˆ‡å‘¨é‚Šå•†åº—ã€‚ç‡Ÿæ¥­æ™‚é–“ 11:00-20:00ã€‚', location: 'LoL Park', transport: 'å¾’æ­¥ï¼šå¾å…‰åŒ–é–€å»£å ´æ­¥è¡Œç´„ 10 åˆ†é˜ã€‚' }] },
          { day: 3, date: '12/20 (å…­)', theme: 'åŸéƒ­èˆ‡æ–‡åŒ–', activities: [{ time: '10:00', title: 'æ±å¤§é–€åŸéƒ­å…¬åœ’', type: 'sight', desc: 'æ•£æ­¥æ–¼é¦–çˆ¾åŸéƒ­ï¼Œæ¬£è³åŸå¸‚æ™¯è‰²ã€‚', location: 'Dongdaemun', transport: '4è™Ÿç·š å¿ æ­¦è·¯ç«™ -> (å¾€ç•¶å¶ºæ–¹å‘ï¼Œ1ç«™) -> æ±å¤§é–€æ­·å²æ–‡åŒ–å…¬åœ’ç«™ (è½‰ä¹˜ 1è™Ÿç·š) -> (å¾€é€é™å±±æ–¹å‘ï¼Œ1ç«™) -> æ±å¤§é–€ç«™ (1è™Ÿå‡ºå£)ã€‚' }, { time: '12:30', title: 'ä»å¯ºæ´é™„è¿‘é¤å»³', type: 'food', desc: 'åœ¨ä»å¯ºæ´äº«ç”¨å‚³çµ±éŸ“å¼æ–™ç†ã€‚', location: 'Insadong', transport: 'åœ°éµï¼šå¾æ±å¤§é–€æ­ä¹˜1è™Ÿç·š (å¾€ä»å·/æ–°æ˜Œæ–¹å‘) -> é˜é–£ç«™ï¼Œæ­¥è¡Œè‡³ä»å¯ºæ´ã€‚' }, { time: '14:30', title: 'ä»å¯ºæ´é€›è¡—', type: 'shopping', desc: 'åƒè§€äººäººå»£å ´ (Ssamzigil)ï¼Œè³¼è²·å‚³çµ±å·¥è—å“ã€‚', location: 'Insadong', transport: 'å¾’æ­¥ï¼šå°±åœ¨é¤å»³é™„è¿‘ã€‚' }, { time: '17:00', title: 'æ¸…æºªå·æ•£æ­¥', type: 'walk', desc: 'å‚æ™šæ™‚åˆ†æ²¿è‘—æ¸…æºªå·æ•£æ­¥ã€‚', location: 'Cheonggyecheon', transport: 'å¾’æ­¥ï¼šå¾ä»å¯ºæ´å¾€å—æ­¥è¡Œç´„ 10 åˆ†é˜å³é”æ¸…æºªå·ã€‚' }, { time: '19:00', title: 'æ˜æ´å•†åœˆ', type: 'shopping', desc: 'æ„Ÿå—æ˜æ´çš„ç†±é¬§å¤œæ™¯ï¼Œäº«ç”¨è¡—é ­å°åƒæˆ–æ¡è³¼ç¾å¦ã€‚', location: 'Myeongdong', transport: 'å¾’æ­¥ï¼šæ²¿è‘—æ¸…æºªå·æ­¥è¡Œè‡³å»£æ©‹ï¼Œè½‰å¾€ä¹™æ”¯è·¯æ–¹å‘ç´„ 10 åˆ†é˜å³é”ã€‚' }] },
          { day: 4, date: '12/21 (æ—¥)', theme: 'åœ­è³¢æ¼”å”±æœƒ & éŸ“å±‹é¢¨æƒ…', activities: [{ time: '10:00', title: 'å—å±±è°·éŸ“å±‹æ‘', type: 'sight', desc: 'ä½æ–¼å¿ æ­¦è·¯ç«™æ—ï¼Œè¼•é¬†æ•£æ­¥é«”é©—å‚³çµ±åº­åœ’ï¼Œä¸éœ€é–€ç¥¨ã€‚', location: 'Chungmuro', transport: 'å¾’æ­¥ï¼šå¾ Wecostay æ­¥è¡Œç´„ 5 åˆ†é˜ã€‚' }, { time: '13:00', title: 'åˆé¤ & ä¼‘æ¯', type: 'food', desc: 'åœ¨å¿ æ­¦è·¯é™„è¿‘ç”¨é¤ï¼Œä¸¦å›é£¯åº—ç¨ä½œæ•´ç†ï¼Œæº–å‚™å‰å¾€æ¼”å”±æœƒã€‚', location: 'Wecostay' }, { time: '14:30', title: 'å‰å¾€ Olympic Hall', type: 'train', desc: 'å‰å¾€å¥§æ—åŒ¹å…‹å…¬åœ’ã€‚', location: 'Olympic Park', transport: 'åœ°éµè½‰ä¹˜ï¼š4è™Ÿç·š å¿ æ­¦è·¯ç«™ -> (å¾€ç•¶å¶ºæ–¹å‘ï¼Œ1ç«™) -> æ±å¤§é–€æ­·å²æ–‡åŒ–å…¬åœ’ç«™ (è½‰ä¹˜ 5è™Ÿç·š) -> (å¾€é¦¬å·/æ²³å—é»”ä¸¹å±±æ–¹å‘ï¼Œç´„13ç«™) -> å¥§æ—åŒ¹å…‹å…¬åœ’ç«™ (3è™Ÿå‡ºå£)ã€‚' }, { time: '17:00', title: '2025 KYUHYUN Concert', type: 'music', desc: 'â€œThe Classicâ€ æ¼”å”±æœƒ @ Olympic Hallã€‚äº«å—åœ­è³¢çš„æ­Œè²ï¼', location: 'Olympic Park' }, { time: '20:30', title: 'è¿”å›å¸‚å€ & æ™šé¤', type: 'food', desc: 'æ¼”å”±æœƒçµæŸå¾Œæ­åœ°éµè¿”å›ï¼Œåƒé “ç†±é¨°é¨°çš„çƒ¤è‚‰æ…¶åŠŸã€‚', location: 'Chungmuro', transport: '5è™Ÿç·š å¥§æ—åŒ¹å…‹å…¬åœ’ç«™ -> (å¾€å‚èŠ±/å…‰åŒ–é–€æ–¹å‘ï¼Œç´„13ç«™) -> æ±å¤§é–€æ­·å²æ–‡åŒ–å…¬åœ’ç«™ (è½‰ä¹˜ 4è™Ÿç·š) -> (å¾€çƒè€³å³¶/èˆå ‚æ–¹å‘ï¼Œ1ç«™) -> å¿ æ­¦è·¯ç«™ (1è™Ÿå‡ºå£)ã€‚' }] },
          { day: 5, date: '12/22 (ä¸€)', theme: 'ç¾ä»£é¦–çˆ¾ & æ¼¢æ±Ÿå¤œæ™¯', activities: [{ time: '11:00', title: 'The Hyundai Seoul', type: 'shopping', desc: 'åƒè§€é¦–çˆ¾æœ€å¤§çš„ç™¾è²¨å…¬å¸ã€‚', location: 'Yeouido', transport: 'åœ°éµè½‰ä¹˜ï¼š4è™Ÿç·š å¿ æ­¦è·¯ç«™ -> (å¾€ç•¶å¶ºæ–¹å‘ï¼Œ1ç«™) -> æ±å¤§é–€æ­·å²æ–‡åŒ–å…¬åœ’ç«™ (è½‰ä¹˜ 5è™Ÿç·š) -> (å¾€å‚èŠ±æ–¹å‘ï¼Œ9ç«™) -> æ±çŸ£å°¼é­¯ç«™ (1è™Ÿå‡ºå£)ï¼Œç›´é€šç™¾è²¨ã€‚' }, { time: '15:00', title: 'æ±çŸ£å³¶æ¼¢æ±Ÿå…¬åœ’', type: 'walk', desc: 'æ¼¢æ±Ÿé‚Šæ•£æ­¥ï¼Œç§Ÿå€Ÿé‡é¤å¢Š (è‹¥å¤©æ°£å…è¨±) æˆ–åœ¨æ¼¢æ±Ÿæ³¡éºµæ©Ÿç…®æ‹‰éºµã€‚', location: 'Yeouido', transport: 'å¾’æ­¥ï¼šå¾ The Hyundai 1 è™Ÿé–€å‡ºä¾†ï¼Œéé¦¬è·¯å³é”æ±çŸ£å³¶æ¼¢æ±Ÿå…¬åœ’ã€‚' }, { time: '17:00', title: 'æ¼¢æ±ŸéŠè¦½èˆ¹', type: 'ship', desc: 'Eland Cruise æ¬£è³æ¼¢æ±Ÿå¤œæ™¯ã€‚', location: 'Yeouido Dock', transport: 'å¾’æ­¥ï¼šæ²¿è‘—æ¼¢æ±Ÿå…¬åœ’æ±Ÿé‚Šå¾€æ±èµ° (çœ‹åˆ° E-land æ¨™èªŒ)ï¼Œæ­¥è¡Œç´„ 10-15 åˆ†é˜è‡³ 2 è™Ÿç¢¼é ­ã€‚' }, { time: '19:30', title: 'å¼˜å¤§æ™šé¤', type: 'food', desc: 'å‰å¾€å……æ»¿å¹´è¼•æ´»åŠ›çš„å¼˜å¤§å•†åœˆäº«ç”¨æ™šé¤ã€‚', location: 'Hongdae', transport: 'åœ°éµè½‰ä¹˜ï¼š5è™Ÿç·š æ±çŸ£å°¼é­¯ç«™ -> (å¾€å‚èŠ±æ–¹å‘ï¼Œ2ç«™) -> æ°¸ç™»æµ¦å€å»³ç«™ (è½‰ä¹˜ 2è™Ÿç·š) -> (å¾€åˆäº•/å¼˜å¤§æ–¹å‘ï¼Œ2ç«™) -> å¼˜å¤§å…¥å£ç«™ (9è™Ÿå‡ºå£)ã€‚' }] },
          { day: 6, date: '12/23 (äºŒ)', theme: 'ä¼´æ‰‹ç¦®æ¡è²· & æ‚ é–’æ™‚å…‰', activities: [{ time: '10:30', title: 'å»£è—å¸‚å ´', type: 'food', desc: 'å“åšç¶ è±†ç…é¤…ã€ç”Ÿç‰›è‚‰ã€éº»è—¥é£¯æ²ã€‚', location: 'Gwangjang Market', transport: 'åœ°éµè½‰ä¹˜ï¼š4è™Ÿç·š å¿ æ­¦è·¯ç«™ -> (å¾€ç•¶å¶ºæ–¹å‘ï¼Œ2ç«™) -> æ±å¤§é–€ç«™ (è½‰ä¹˜ 1è™Ÿç·š) -> (å¾€é¦–çˆ¾ç«™æ–¹å‘ï¼Œ1ç«™) -> é˜è·¯5è¡—ç«™ (8è™Ÿå‡ºå£å³æ˜¯å¸‚å ´å…¥å£)ã€‚' }, { time: '14:00', title: 'æ¨‚å¤©è¶…å¸‚', type: 'shopping', desc: 'é¦–çˆ¾ç«™åº—ã€‚æ¡è³¼é›¶é£Ÿã€æ³¡éºµã€æµ·è‹”ç­‰ä¼´æ‰‹ç¦®ã€‚', location: 'Seoul Station', transport: 'åœ°éµç›´é”ï¼šç”±é˜è·¯5è¡—ç«™æ­ä¹˜1è™Ÿç·š (å¾€é¦–çˆ¾ç«™/ä»å·æ–¹å‘ï¼Œ3ç«™) -> é¦–çˆ¾ç«™ (1è™Ÿå‡ºå£å‡ºä¾†ä¸Šæ‰‹æ‰¶æ¢¯å³é”)ã€‚' }, { time: '17:00', title: 'é£¯åº—æ‰“åŒ… & ä¼‘æ¯', type: 'hotel', desc: 'å°‡æˆ°åˆ©å“æ”¾å›é£¯åº—ï¼Œæ•´ç†è¡Œæã€‚', location: 'Wecostay', transport: 'åœ°éµç›´é”ï¼šç”±é¦–çˆ¾ç«™æ­ä¹˜4è™Ÿç·š (å¾€ç•¶å¶ºæ–¹å‘ï¼Œ2ç«™) -> å¿ æ­¦è·¯ç«™ã€‚' }, { time: '19:00', title: 'æœ€å¾Œçš„æ™šé¤', type: 'food', desc: 'åœ¨ä¹™æ”¯è·¯ (Hipjiro) é«”é©—ç¨ç‰¹çš„å··å¼„é…’å§æˆ–çƒ¤è…¸åº—ã€‚', location: 'Euljiro', transport: 'å¾’æ­¥ï¼šå¾å¿ æ­¦è·¯ç«™ 8 è™Ÿå‡ºå£ï¼Œæ­¥è¡Œç´„ 5-8 åˆ†é˜è‡³ä¹™æ”¯è·¯ 3 è¡—ä¸€å¸¶å··å¼„ã€‚' }] },
          { day: 7, date: '12/24 (ä¸‰)', theme: 'å‘Šåˆ¥é¦–çˆ¾ & è¿”å®¶', activities: [{ time: '06:00', title: 'é€€æˆ¿ & å‰å¾€æ©Ÿå ´', type: 'bus', desc: 'æ­ä¹˜ 6015 æ©Ÿå ´å·´å£«å‰å¾€ä»å·æ©Ÿå ´ (æˆ–æ­è¨ˆç¨‹è»Šè‡³é¦–çˆ¾ç«™æ­ AREX ç›´é”è»Š)ã€‚', location: 'Airport Bus Stop', transport: 'æ©Ÿå ´å·´å£«ï¼šå‰å¾€å¿ æ­¦è·¯ç«™ 1 è™Ÿå‡ºå£å‰æ–¹å…¬è»Šç«™ï¼Œæ­ä¹˜ã€6015 æ©Ÿå ´å·´å£«ã€‘(å¾€ä»å·æ©Ÿå ´æ–¹å‘)ï¼Œè»Šç¨‹ç´„ 70-80 åˆ†é˜ã€‚' }, { time: '07:35', title: 'è¾¦ç†ç™»æ©Ÿ & é€€ç¨…', type: 'plane', desc: 'é•·æ¦®èˆªç©ºæ«ƒæª¯å ±åˆ°ï¼Œè¾¦ç†å¸‚å€é€€ç¨…å–®æ“šçš„æµ·é—œè“‹ç«  (è‹¥éœ€è¦)ã€‚', location: 'ICN Airport' }, { time: '11:40', title: 'BR169 èµ·é£›', type: 'flight', desc: 'ä»å· (ICN) -> æ¡ƒåœ’ (TPE)', location: 'Departure Hall' }, { time: '13:30', title: 'æŠµé”å°ç£', type: 'home', desc: 'å¹³å®‰æŠµé”æº«æš–çš„å®¶ã€‚', location: 'Taipei' }] }
      ];

      const days_KR = [
        { day: 1, date: '12/18 (ëª©)', theme: 'ì„œìš¸ ë„ì°© & í˜¸í…” ì²´í¬ì¸', activities: [{ time: '12:00', title: 'ì§‘ì—ì„œ ì¶œë°œ', type: 'car', desc: 'íƒ€ì˜¤ìœ„ì•ˆ ê³µí•­ ì´ë™.', location: 'Home', transport: 'ì „ìš© ì°¨ëŸ‰' }, { time: '15:15', title: 'BR160 ì´ë¥™', type: 'flight', desc: 'íƒ€ì˜¤ìœ„ì•ˆ(TPE) -> ì¸ì²œ(ICN)', location: 'TPE Airport' }, { time: '18:45', title: 'ì¸ì²œê³µí•­ ë„ì°©', type: 'arrival', desc: 'ì…êµ­ ìˆ˜ì†, í‹°ë¨¸ë‹ˆ êµ¬ë§¤.', location: 'ICN Airport' }, { time: '20:00', title: 'Wecostay ì´ë™', type: 'bus', desc: '6015ë²ˆ ê³µí•­ë²„ìŠ¤ (ì¶©ë¬´ë¡œì—­).', info: '17,000 KRW', transport: 'ì¸ì²œê³µí•­ 5B/11B ìŠ¹ê°•ì¥ -> ã€6015 ê³µí•­ë²„ìŠ¤ã€‘ (ëª…ë™ ë°©ë©´) -> 3ì •ê±°ì¥(ì•½ 70ë¶„) -> ã€Œì¶©ë¬´ë¡œì—­ã€ í•˜ì°¨ -> ë„ë³´ 2ë¶„.' }, { time: '21:30', title: 'ì²´í¬ì¸ & ì €ë…', type: 'food', desc: 'ì²´í¬ì¸ í›„ ì¹˜í‚¨ì´ë‚˜ ë¶€ëŒ€ì°Œê°œ.', location: 'Chungmuro' }] },
        { day: 2, date: '12/19 (ê¸ˆ)', theme: 'ì—­ì‚¬ ì‚°ì±… & ì „í†µì˜ ë©‹', activities: [{ time: '10:00', title: 'ë¶ì´Œ í•œì˜¥ë§ˆì„ & 8ê²½', type: 'sight', desc: 'í•œì˜¥ë§ˆì„ ì‚°ì±….', location: 'Bukchon', transport: '3í˜¸ì„  ì•ˆêµ­ì—­ 2ë²ˆ ì¶œêµ¬ -> ë„ë³´ ì´ë™.' }, { time: '12:30', title: 'ë¶ì´Œ ë°±ë…„í† ì¢…ì‚¼ê³„íƒ•', type: 'food', desc: 'ë¶ì´Œ ê·¼ì²˜ ë§›ìˆëŠ” ì‚¼ê³„íƒ•.', location: 'Bukchon', transport: 'ë„ë³´: ë¶ì´Œ í•œì˜¥ë§ˆì„ì—ì„œ ë„ë³´ ì´ë™.' }, { time: '14:30', title: 'ê²½ë³µê¶ & ê´‘í™”ë¬¸', type: 'sight', desc: 'ê²½ë³µê¶ ê´€ëŒ.', location: 'Gyeongbokgung', transport: 'ë„ë³´: ë¶ì´Œì—ì„œ ì„œìª½ìœ¼ë¡œ ì•½ 15ë¶„ ì´ë™.' }, { time: '17:00', title: 'LoL Park (GRAN SEOUL)', type: 'sight', desc: 'LCK ì•„ë ˆë‚˜ ë° ë¼ì´ì—‡ ìŠ¤í† ì–´ ë°©ë¬¸. ìš´ì˜ì‹œê°„ 11:00-20:00.', location: 'LoL Park', transport: 'ë„ë³´: ê´‘í™”ë¬¸ê´‘ì¥ì—ì„œ ì•½ 10ë¶„.' }] },
        { day: 3, date: '12/20 (í† )', theme: 'ì„±ê³½ê³¼ ë¬¸í™”', activities: [{ time: '10:00', title: 'ë™ëŒ€ë¬¸ ì„±ê³½ê³µì›', type: 'sight', desc: 'ì„±ê³½ ì‚°ì±….', location: 'Dongdaemun', transport: '4í˜¸ì„  ì¶©ë¬´ë¡œì—­ -> (ë‹¹ê³ ê°œ ë°©ë©´, 1ì •ê±°ì¥) -> ë™ëŒ€ë¬¸ì—­ì‚¬ë¬¸í™”ê³µì›ì—­ (1í˜¸ì„  í™˜ìŠ¹) -> (ì†Œìš”ì‚° ë°©ë©´, 1ì •ê±°ì¥) -> ë™ëŒ€ë¬¸ì—­ (1ë²ˆ ì¶œêµ¬).' }, { time: '12:30', title: 'ì¸ì‚¬ë™ ë§›ì§‘', type: 'food', desc: 'ì „í†µ í•œì‹.', location: 'Insadong', transport: 'ì§€í•˜ì² : 1í˜¸ì„  ë™ëŒ€ë¬¸ì—­ -> ì¢…ê°ì—­ ì´ë™ í›„ ë„ë³´.' }, { time: '14:30', title: 'ì¸ì‚¬ë™ ì‡¼í•‘', type: 'shopping', desc: 'ìŒˆì§€ê¸¸.', location: 'Insadong', transport: 'ë„ë³´: ì‹ë‹¹ ê·¼ì²˜.' }, { time: '17:00', title: 'ì²­ê³„ì²œ ì‚°ì±…', type: 'walk', desc: 'ì €ë… ì‚°ì±….', location: 'Cheonggyecheon', transport: 'ë„ë³´: ì¸ì‚¬ë™ì—ì„œ ë‚¨ìª½ìœ¼ë¡œ 10ë¶„.' }, { time: '19:00', title: 'ëª…ë™ ê±°ë¦¬', type: 'shopping', desc: 'ëª…ë™ ì‡¼í•‘ ë° ê¸¸ê±°ë¦¬ ìŒì‹ ì¦ê¸°ê¸°.', location: 'Myeongdong', transport: 'ë„ë³´: ì²­ê³„ì²œì—ì„œ ì„ì§€ë¡œ ë°©í–¥ìœ¼ë¡œ ì•½ 10-15ë¶„.' }] },
        { day: 4, date: '12/21 (ì¼)', theme: 'ì—¬ìœ ë¡œìš´ ì˜¤í›„ & ëª…ë™', activities: [{ time: '10:00', title: 'ë‚¨ì‚°ê³¨ í•œì˜¥ë§ˆì„', type: 'sight', desc: 'ì‚°ì±….', location: 'Chungmuro', transport: 'ë„ë³´ 5ë¶„.' }, { time: '13:00', title: 'ì ì‹¬ & íœ´ì‹', type: 'food', desc: 'ì‹ì‚¬ í›„ íœ´ì‹.', location: 'Wecostay' }, { time: '15:00', title: 'ë‚¨ì‚° ì˜¤ë¥´ë¯¸', type: 'sight', desc: 'ëª…ë™ì—­ -> íˆ¬ëª… ì—˜ë¦¬ë² ì´í„°.', location: 'Namsan Oreumi', transport: '4í˜¸ì„  ì¶©ë¬´ë¡œì—­ -> (ì˜¤ì´ë„ ë°©ë©´, 1ì •ê±°ì¥) -> ëª…ë™ì—­ (4ë²ˆ ì¶œêµ¬) -> ì§ì§„ -> íšŒí˜„ì‚¬ê±°ë¦¬ ì¢ŒíšŒì „.', visual: 'namsan_path', link: { text: 'Namsan Oreumi', url: 'https://www.bring-you.info/zh-tw/n-seoul-tower' } }, { time: '15:40', title: 'ë‚¨ì‚° ì¼€ì´ë¸”ì¹´ & Nì„œìš¸íƒ€ì›Œ', type: 'sight', desc: 'ì¼€ì´ë¸”ì¹´ íƒ‘ìŠ¹ (10:00-23:00).', location: 'Namsan Tower', transport: 'ì˜¤ë¥´ë¯¸ ì—˜ë¦¬ë² ì´í„° -> ì¼€ì´ë¸”ì¹´ ë§¤í‘œì†Œ.' }, { time: '19:30', title: 'ëª…ë™ ì´ë™ & ì €ë…', type: 'food', desc: 'íƒ€ì›Œ ê´€ëŒ í›„ ëª…ë™ ì‡¼í•‘/ì‹ì‚¬.', location: 'Myeongdong', transport: 'ì¼€ì´ë¸”ì¹´/ë²„ìŠ¤ í•˜ì‚° í›„ -> ë„ë³´ ì´ë™.' }] },
        { day: 5, date: '12/22 (ì›”)', theme: 'í˜„ëŒ€ ì„œìš¸ & í•œê°•', activities: [{ time: '11:00', title: 'The Hyundai Seoul', type: 'shopping', desc: 'ë°±í™”ì .', location: 'Yeouido', transport: '4í˜¸ì„  ì¶©ë¬´ë¡œì—­ -> (ë‹¹ê³ ê°œ ë°©ë©´, 1ì •ê±°ì¥) -> ë™ëŒ€ë¬¸ì—­ì‚¬ë¬¸í™”ê³µì› (5í˜¸ì„  í™˜ìŠ¹) -> (ë°©í™” ë°©ë©´, 9ì •ê±°ì¥) -> ì—¬ì˜ë‚˜ë£¨ì—­ (1ë²ˆ ì¶œêµ¬).' }, { time: '15:00', title: 'ì—¬ì˜ë„ í•œê°•ê³µì›', type: 'walk', desc: 'í•œê°• ë¼ë©´.', location: 'Yeouido', transport: 'ë„ë³´: ë”í˜„ëŒ€ 1ë²ˆ ê²Œì´íŠ¸ ê±´ë„ˆí¸.' }, { time: '17:00', title: 'í•œê°• ìœ ëŒì„ ', type: 'ship', desc: 'ì´ëœë“œ í¬ë£¨ì¦ˆ.', location: 'Yeouido Dock', transport: 'ë„ë³´: í•œê°•ê³µì› ë”°ë¼ ë™ìª½ìœ¼ë¡œ ì´ë™.' }, { time: '19:30', title: 'í™ëŒ€ ì €ë…', type: 'food', desc: 'í™ëŒ€ ê±°ë¦¬.', location: 'Hongdae', transport: '5í˜¸ì„  ì—¬ì˜ë‚˜ë£¨ì—­ -> (ë°©í™” ë°©ë©´, 2ì •ê±°ì¥) -> ì˜ë“±í¬êµ¬ì²­ì—­ (2í˜¸ì„  í™˜ìŠ¹) -> (í™ëŒ€ì…êµ¬ ë°©ë©´, 2ì •ê±°ì¥) -> í™ëŒ€ì…êµ¬ì—­ (9ë²ˆ ì¶œêµ¬).' }] },
        { day: 6, date: '12/23 (í™”)', theme: 'ãŠåœŸç”£', activities: [{ time: '10:30', title: 'åºƒè”µå¸‚å ´', type: 'food', desc: 'å±‹å°ã€‚', location: 'Gwangjang Market', transport: '4í˜¸ì„  ì¶©ë¬´ë¡œì—­ -> (ë‹¹ê³ ê°œ ë°©ë©´, 2ì •ê±°ì¥) -> ë™ëŒ€ë¬¸(1í˜¸ì„  í™˜ìŠ¹) -> (ì¸ì²œ/ì„œìš¸ì—­ ë°©ë©´, 1ì •ê±°ì¥) -> ì¢…ë¡œ5ê°€ì—­ (8ë²ˆ ì¶œêµ¬).' }, { time: '14:00', title: 'ãƒ­ãƒƒãƒ†ãƒãƒ¼ãƒˆ', type: 'shopping', desc: 'ã‚½ã‚¦ãƒ«é§…ã€‚', location: 'Seoul Station', transport: '1í˜¸ì„  ì¢…ë¡œ5ê°€ -> (ì„œìš¸ì—­/ì¸ì²œ ë°©ë©´, 3ì •ê±°ì¥) -> ì„œìš¸ì—­ (1ë²ˆ ì¶œêµ¬).' }, { time: '17:00', title: 'ãƒ‘ãƒƒã‚­ãƒ³ã‚°', type: 'hotel', desc: 'è·é€ ã‚Šã€‚', location: 'Wecostay', transport: '4í˜¸ì„  ì„œìš¸ì—­ -> (ë‹¹ê³ ê°œ ë°©ë©´, 2ì •ê±°ì¥) -> å¿ æ­¦è·¯é§…ã€‚' }, { time: '19:00', title: 'æœ€å¾Œã®å¤•é£Ÿ', type: 'food', desc: 'ä¹™æ”¯è·¯ã€‚', location: 'Euljiro', transport: 'å¾’æ­©ï¼šå¿ æ­¦è·¯é§…8ç•ªå‡ºå£ã‹ã‚‰ã€‚' }] },
        { day: 7, date: '12/24 (æ°´)', theme: 'ê·€êµ­ (íƒ€ì˜¤ìœ„ì•ˆ)', activities: [{ time: '06:00', title: 'ê³µí•­ ì´ë™', type: 'bus', desc: '6015 ê³µí•­ë²„ìŠ¤.', location: 'Airport Bus Stop', transport: 'ê³µí•­ë²„ìŠ¤: ì¶©ë¬´ë¡œì—­ 1ë²ˆ ì¶œêµ¬ ì• ì •ë¥˜ì¥ (ì•½ 70-80ë¶„).' }, { time: '07:35', title: 'ì²´í¬ì¸', type: 'plane', desc: 'ì—ë°”í•­ê³µ.', location: 'ICN Airport' }, { time: '11:40', title: 'BR169 ì´ë¥™', type: 'flight', desc: 'ì¸ì²œ(ICN) -> íƒ€ì˜¤ìœ„ì•ˆ(TPE)', location: 'Departure Hall' }, { time: '13:30', title: 'ëŒ€ë§Œ ë„ì°©', type: 'home', desc: 'ë„ì°©.', location: 'Taipei' }] }
      ];

      const days_EN = [
          { day: 1, date: '12/18 (Thu)', theme: 'Arrival', activities: [{ time: '12:00', title: 'Leave Home', type: 'car', desc: 'To Airport.', location: 'Home' }, { time: '15:15', title: 'Flight BR160', type: 'flight', desc: 'TPE -> ICN', location: 'TPE Airport' }, { time: '18:45', title: 'Arrival', type: 'arrival', desc: 'Immigration.', location: 'ICN Airport' }, { time: '20:00', title: 'To Wecostay', type: 'bus', desc: 'Bus 6015 to Chungmuro.', info: '17,000 KRW', transport: 'Bus 6015 at Stop 5B/11B -> (3 stops, ~70min) -> Chungmuro Stn -> Walk 2min.' }, { time: '21:30', title: 'Check-in', type: 'food', desc: 'Dinner.', location: 'Chungmuro' }] },
          { day: 2, date: '12/19 (Fri)', theme: 'History', activities: [{ time: '10:00', title: 'Bukchon Hanok Village', type: 'sight', desc: 'Hanok & 8 Views.', location: 'Bukchon', transport: 'Line 3 Anguk Stn Exit 2.' }, { time: '12:30', title: 'Bukchon Samgyetang', type: 'food', desc: 'Ginseng Chicken Soup.', location: 'Bukchon', transport: 'Walk from Hanok Village.' }, { time: '14:30', title: 'Gyeongbokgung', type: 'sight', desc: 'Palace.', location: 'Gyeongbokgung', transport: 'Walk.' }, { time: '17:00', title: 'LoL Park (GRAN SEOUL)', type: 'sight', desc: 'Visit LCK Arena & Riot Store. Open 11:00-20:00.', location: 'LoL Park', transport: 'Walk: 10 mins from Gwanghwamun Sq.' }] },
          { day: 3, date: '12/20 (Sat)', theme: 'City Wall', activities: [{ time: '10:00', title: 'Dongdaemun Seonggwak Park', type: 'sight', desc: 'City Wall.', location: 'Dongdaemun', transport: 'Line 4 Chungmuro Stn -> (for Danggogae, 1 stop) -> Dongdaemun History (Transfer Line 1) -> (for Soyosan, 1 stop) -> Dongdaemun Stn (Exit 1).' }, { time: '12:30', title: 'Insadong Lunch', type: 'food', desc: 'Korean Food.', location: 'Insadong', transport: 'Line 1 to Jonggak, then walk.' }, { time: '14:30', title: 'Insadong Shopping', type: 'shopping', desc: 'Crafts.', location: 'Insadong', transport: 'Walk nearby.' }, { time: '17:00', title: 'Cheonggyecheon', type: 'walk', desc: 'Stream.', location: 'Cheonggyecheon', transport: 'Walk south from Insadong.' }, { time: '19:00', title: 'Myeongdong', type: 'shopping', desc: 'Shopping.', location: 'Myeongdong', transport: 'Walk: 10-15 mins from Cheonggyecheon.' }] },
          { day: 4, date: '12/21 (Sun)', theme: 'Namsan & Myeongdong', activities: [{ time: '10:00', title: 'Namsangol Hanok', type: 'sight', desc: 'Walk.', location: 'Chungmuro' }, { time: '13:00', title: 'Lunch & Rest', type: 'food', desc: 'Rest.', location: 'Wecostay' }, { time: '15:00', title: 'To Namsan Oreumi', type: 'sight', desc: 'Subway to Elevator.', location: 'Namsan Oreumi', transport: 'Line 4 Chungmuro Stn -> (for Oido, 1 stop) -> Myeongdong Stn (Exit 4) -> Straight -> Left.', visual: 'namsan_path', link: { text: 'Namsan Oreumi', url: 'https://www.bring-you.info/zh-tw/n-seoul-tower' } }, { time: '15:40', title: 'Namsan Cable Car', type: 'sight', desc: 'Cable Car (10:00-23:00).', location: 'Namsan Tower' }, { time: '19:30', title: 'Myeongdong Dinner', type: 'food', desc: 'Shopping & Dinner.', location: 'Myeongdong', transport: 'Descend via cable car, walk to Myeongdong.' }] },
          { day: 5, date: '12/22 (Mon)', theme: 'Modern Seoul', activities: [{ time: '11:00', title: 'The Hyundai Seoul', type: 'shopping', desc: 'Dept Store.', location: 'Yeouido', transport: 'Line 4 Chungmuro Stn -> (for Danggogae, 1 stop) -> Dongdaemun History (Transfer Line 5) -> (for Banghwa, 9 stops) -> Yeouinaru (Exit 1).' }, { time: '15:00', title: 'Hangang Park', type: 'walk', desc: 'Picnic.', location: 'Yeouido', transport: 'Walk from Gate 1.' }, { time: '17:00', title: 'River Cruise', type: 'ship', desc: 'Eland Cruise.', location: 'Yeouido Dock', transport: 'Walk east along the river.' }, { time: '19:30', title: 'Hongdae Dinner', type: 'food', desc: 'Youth District.', location: 'Hongdae', transport: 'Line 5 -> (for Banghwa, 2 stops) -> Yeongdeungpo-gu Office (Transfer Line 2) -> (for Hongik Univ, 2 stops) -> Hongik Univ (Exit 9).' }] },
          { day: 6, date: '12/23 (Tue)', theme: 'Souvenirs', activities: [{ time: '10:30', title: 'Gwangjang Market', type: 'food', desc: 'Street Food.', location: 'Gwangjang Market', transport: 'Line 4 -> (for Danggogae, 2 stops) -> Dongdaemun (Transfer Line 1) -> (for Incheon, 1 stop) -> Jongno 5-ga (Exit 8).' }, { time: '14:00', title: 'Lotte Mart', type: 'shopping', desc: 'Seoul Stn.', location: 'Seoul Station' }, { time: '17:00', title: 'Packing', type: 'hotel', desc: 'Rest.', location: 'Wecostay', transport: 'Line 4 to Chungmuro (2 stops).' }, { time: '19:00', title: 'Final Dinner', type: 'food', desc: 'Euljiro.', location: 'Euljiro', transport: 'Walk from Chungmuro Exit 8.' }] },
          { day: 7, date: '12/24 (Wed)', theme: 'Departure', activities: [{ time: '06:00', title: 'To Airport', type: 'bus', desc: 'Bus 6015.', location: 'Airport Bus Stop', transport: 'Bus 6015 from Chungmuro Exit 1.' }, { time: '07:35', title: 'Check-in', type: 'plane', desc: 'EVA Air.', location: 'ICN Airport' }, { time: '11:40', title: 'Flight BR169', type: 'flight', desc: 'ICN -> TPE', location: 'Departure Hall' }, { time: '13:30', title: 'Arrive', type: 'home', desc: 'Home.', location: 'Taipei' }] }
      ];
      
      const days_JP = [
          { day: 1, date: '12/18 (æœ¨)', theme: 'ã‚½ã‚¦ãƒ«åˆ°ç€', activities: [{ time: '12:00', title: 'å‡ºç™º', type: 'car', desc: 'ç©ºæ¸¯ã¸ã€‚', location: 'Home' }, { time: '15:15', title: 'ã‚¨ãƒãƒ¼èˆªç©º BR160', type: 'flight', desc: 'æ¡ƒåœ’(TPE) -> ä»å·(ICN)', location: 'TPE Airport' }, { time: '18:45', title: 'åˆ°ç€', type: 'arrival', desc: 'å…¥å›½å¯©æŸ»ã€‚', location: 'ICN Airport' }, { time: '20:00', title: 'Wecostayã¸', type: 'bus', desc: '6015ãƒã‚¹ (å¿ æ­¦è·¯)ã€‚', info: '17,000 KRW', transport: 'ä»å·ç©ºæ¸¯ 5B/11Bä¹—ã‚Šå ´ ã€6015ãƒã‚¹ã€‘(æ˜æ´æ–¹é¢) -> (3é§…, ç´„70åˆ†) -> ã€Œå¿ æ­¦è·¯é§…ã€ä¸‹è»Š -> å¾’æ­©2åˆ†ã€‚' }, { time: '21:30', title: 'å¤•é£Ÿ', type: 'food', desc: 'ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³ã€‚', location: 'Chungmuro' }] },
          { day: 2, date: '12/19 (é‡‘)', theme: 'æ­´å²', activities: [{ time: '10:00', title: 'åŒ—æ‘éŸ“å±‹æ‘ & å…«æ™¯', type: 'sight', desc: 'æ•£ç­–ã€‚', location: 'Bukchon', transport: '3å·ç·š å®‰å›½é§… 2ç•ªå‡ºå£ã€‚' }, { time: '12:30', title: 'åŒ—æ‘å‚é¶æ¹¯', type: 'food', desc: 'ãƒ©ãƒ³ãƒã€‚', location: 'Bukchon', transport: 'å¾’æ­©ï¼šéŸ“å±‹æ‘ã‹ã‚‰ã€‚' }, { time: '14:30', title: 'æ™¯ç¦å®® & å…‰åŒ–é–€', type: 'sight', desc: 'ç‹å®®ã€‚', location: 'Gyeongbokgung', transport: 'å¾’æ­©ï¼šåŒ—æ‘ã‹ã‚‰è¥¿ã¸15åˆ†ã€‚' }, { time: '17:00', title: 'LoL Park (GRAN SEOUL)', type: 'sight', desc: 'LCKã‚¢ãƒªãƒ¼ãƒŠã¨ãƒ©ã‚¤ã‚¢ãƒƒãƒˆã‚¹ãƒˆã‚¢ã€‚å–¶æ¥­æ™‚é–“ 11:00-20:00ã€‚', location: 'LoL Park', transport: 'å¾’æ­©ï¼šå…‰åŒ–é–€åºƒå ´ã‹ã‚‰ç´„10åˆ†ã€‚' }] },
          { day: 3, date: '12/20 (åœŸ)', theme: 'åŸéƒ­ & æ–‡åŒ–', activities: [{ time: '10:00', title: 'æ±å¤§é–€åŸéƒ­å…¬åœ’', type: 'sight', desc: 'æ•£æ­©ã€‚', location: 'Dongdaemun', transport: '4å·ç·š å¿ æ­¦è·¯é§… -> (ã‚¿ãƒ³ã‚´ã‚²æ–¹é¢ã€1é§…) -> æ±å¤§é–€æ­´å²æ–‡åŒ–å…¬åœ’é§… (1å·ç·šä¹—æ›) -> (é€é¥å±±æ–¹é¢ã€1é§…) -> æ±å¤§é–€é§… (1ç•ªå‡ºå£)ã€‚' }, { time: '12:30', title: 'ä»å¯ºæ´ãƒ©ãƒ³ãƒ', type: 'food', desc: 'éŸ“å›½æ–™ç†ã€‚', location: 'Insadong', transport: '1å·ç·š é¾è·¯3è¡—é§…ã¸ç§»å‹•ã€‚' }, { time: '14:30', title: 'ä»å¯ºæ´ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°', type: 'shopping', desc: 'ã‚µãƒ ã‚¸ã‚­ãƒ«ã€‚', location: 'Insadong', transport: 'å¾’æ­©ã€‚' }, { time: '17:00', title: 'æ¸…æ¸“å·æ•£æ­©', type: 'walk', desc: 'æ•£æ­©ã€‚', location: 'Cheonggyecheon', transport: 'å¾’æ­©ï¼šä»å¯ºæ´ã‹ã‚‰å—ã¸ã€‚' }, { time: '19:00', title: 'æ˜æ´', type: 'shopping', desc: 'ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°ã€‚', location: 'Myeongdong', transport: 'å¾’æ­©ï¼šæ¸…æ¸“å·ã‹ã‚‰ä¹™æ”¯è·¯æ–¹é¢ã¸ç´„10-15åˆ†ã€‚' }] },
          { day: 4, date: '12/21 (æ—¥)', theme: 'å—å±± & æ˜æ´', activities: [{ time: '10:00', title: 'å—å±±è°·éŸ“å±‹æ‘', type: 'sight', desc: 'æ•£ç­–ã€‚', location: 'Chungmuro' }, { time: '13:00', title: 'ãƒ©ãƒ³ãƒ & ä¼‘æ†©', type: 'food', desc: 'ä¼‘æ†©ã€‚', location: 'Wecostay' }, { time: '15:00', title: 'å—å±±ã‚ªãƒ«ãƒŸã¸', type: 'sight', desc: 'æ˜æ´é§… -> é€æ˜ã‚¨ãƒ¬ãƒ™ãƒ¼ã‚¿ãƒ¼ã€‚', location: 'Namsan Oreumi', transport: '4å·ç·š å¿ æ­¦è·¯é§… -> (çƒè€³å³¶æ–¹é¢ã€1é§…) -> æ˜æ´é§… (4ç•ªå‡ºå£) -> ç›´é€² -> å·¦æŠ˜ã€‚', visual: 'namsan_path', link: { text: 'Namsan Oreumi', url: 'https://www.bring-you.info/zh-tw/n-seoul-tower' } }, { time: '15:40', title: 'å—å±±ã‚±ãƒ¼ãƒ–ãƒ«ã‚«ãƒ¼', type: 'sight', desc: 'ã‚±ãƒ¼ãƒ–ãƒ«ã‚«ãƒ¼ (10:00-23:00)ã€‚', location: 'Namsan Tower' }, { time: '19:30', title: 'æ˜æ´ã¸ç§»å‹• & å¤•é£Ÿ', type: 'food', desc: 'ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°ã¨é£Ÿäº‹ã€‚', location: 'Myeongdong', transport: 'ã‚±ãƒ¼ãƒ–ãƒ«ã‚«ãƒ¼ä¸‹å±±å¾Œã€å¾’æ­©ã€‚' }] },
          { day: 5, date: '12/22 (æœˆ)', theme: 'ç¾ä»£ã‚½ã‚¦ãƒ«', activities: [{ time: '11:00', title: 'The Hyundai Seoul', type: 'shopping', desc: 'ãƒ‡ãƒ‘ãƒ¼ãƒˆã€‚', location: 'Yeouido', transport: '4å·ç·š å¿ æ­¦è·¯é§… -> (ã‚¿ãƒ³ã‚´ã‚²æ–¹é¢ã€1é§…) -> æ±å¤§é–€æ­´å²æ–‡åŒ–å…¬åœ’ (5å·ç·šä¹—æ›) -> (å‚èŠ±æ–¹é¢ã€9é§…) -> ãƒ¨ã‚¤ãƒŠãƒ«(1ç•ªå‡ºå£)ã€‚' }, { time: '15:00', title: 'æ¼¢æ±Ÿå…¬åœ’', type: 'walk', desc: 'æ•£æ­©ã€‚', location: 'Yeouido', transport: 'å¾’æ­©ï¼šã‚¶ãƒ»ç¾ä»£1ç•ªã‚²ãƒ¼ãƒˆå‘ã‹ã„ã€‚' }, { time: '17:00', title: 'æ¼¢æ±ŸéŠè¦§èˆ¹', type: 'ship', desc: 'ã‚¯ãƒ«ãƒ¼ã‚ºã€‚', location: 'Yeouido Dock', transport: 'å¾’æ­©ï¼šæ¼¢æ±Ÿæ²¿ã„ã‚’æ±ã¸10-15åˆ†ã€‚' }, { time: '19:30', title: 'å¼˜å¤§ãƒ‡ã‚£ãƒŠãƒ¼', type: 'food', desc: 'è‹¥è€…ã®è¡—ã€‚', location: 'Hongdae', transport: '5å·ç·š -> (å‚èŠ±æ–¹é¢ã€2é§…) -> æ°¸ç™»æµ¦åŒºåº(2å·ç·šä¹—æ›) -> (å¼˜å¤§å…¥å£æ–¹é¢ã€2é§…) -> å¼˜å¤§å…¥å£(9ç•ªå‡ºå£)ã€‚' }] },
          { day: 6, date: '12/23 (ç«)', theme: 'ãŠåœŸç”£', activities: [{ time: '10:30', title: 'åºƒè”µå¸‚å ´', type: 'food', desc: 'å±‹å°ã€‚', location: 'Gwangjang Market', transport: '4å·ç·š å¿ æ­¦è·¯é§… -> (ã‚¿ãƒ³ã‚´ã‚²æ–¹é¢ã€2é§…) -> æ±å¤§é–€(1å·ç·šä¹—æ›) -> (ã‚½ã‚¦ãƒ«é§…/ä»å·æ–¹é¢ã€1é§…) -> é¾è·¯5è¡—(8ç•ªå‡ºå£)ã€‚' }, { time: '14:00', title: 'ãƒ­ãƒƒãƒ†ãƒãƒ¼ãƒˆ', type: 'shopping', desc: 'ã‚½ã‚¦ãƒ«é§…ã€‚', location: 'Seoul Station', transport: '1å·ç·š é¾è·¯5è¡— -> (ã‚½ã‚¦ãƒ«é§…/ä»å·æ–¹é¢ã€3é§…) -> ã‚½ã‚¦ãƒ«é§…(1ç•ªå‡ºå£)ã€‚' }, { time: '17:00', title: 'ãƒ‘ãƒƒã‚­ãƒ³ã‚°', type: 'hotel', desc: 'è·é€ ã‚Šã€‚', location: 'Wecostay', transport: '4å·ç·š ã‚½ã‚¦ãƒ«é§… -> (ã‚¿ãƒ³ã‚´ã‚²æ–¹é¢ã€2é§…) -> å¿ æ­¦è·¯é§…ã€‚' }, { time: '19:00', title: 'æœ€å¾Œã®å¤•é£Ÿ', type: 'food', desc: 'ä¹™æ”¯è·¯ã€‚', location: 'Euljiro', transport: 'å¾’æ­©ï¼šå¿ æ­¦è·¯é§…8ç•ªå‡ºå£ã‹ã‚‰ã€‚' }] },
          { day: 7, date: '12/24 (æ°´)', theme: 'å¸°å›½ (ä»™å°)', activities: [{ time: '06:00', title: 'ç©ºæ¸¯ã¸', type: 'bus', desc: '6015ãƒã‚¹ã€‚', location: 'Airport Bus Stop', transport: 'ç©ºæ¸¯ãƒã‚¹ï¼šå¿ æ­¦è·¯é§…1ç•ªå‡ºå£å‰ (ç´„70åˆ†)ã€‚' }, { time: '07:35', title: 'ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³', type: 'plane', desc: 'æ‰‹ç¶šãã€‚', location: 'ICN Airport' }, { time: '09:35', title: 'ä»™å°è¡Œãå‡ºç™º', type: 'flight', desc: 'ä»å·(ICN) -> ä»™å°(SDJ)', location: 'Departure Hall' }, { time: '11:45', title: 'ä»™å°åˆ°ç€', type: 'home', desc: 'ãŠç–²ã‚Œæ§˜ã§ã—ãŸã€‚', location: 'Sendai Airport' }] }
      ];

      const data = {
        ZH: [commonDay0.ZH, ...days_ZH],
        KR: [commonDay0.KR, ...days_KR],
        EN: [commonDay0.EN, ...days_EN],
        JP: [commonDay0.JP, ...days_JP]
      };
      return data[lang];
    };

    // --- 4. Load Data Function ---
    const loadData = (language) => {
        // Upgrade key to v2 to force refresh data structure
        const key = `seoul_trip_2025_v6_${language}`;
        try { 
          const saved = localStorage.getItem(key); 
          if (saved) {
            return JSON.parse(saved); 
          }
        } catch (e) { console.error("Failed to load itinerary", e); }
        return getInitialItinerary(language);
    };

    // --- 5. Component Definitions ---

    // 5.1 Namsan Path Visualization Component
    const NamsanPathVisual = () => (
      <div className="mt-2 p-4 bg-white rounded-xl shadow-sm border border-slate-200">
        <h4 className="text-xs font-bold text-slate-500 mb-2">è·¯ç·šæŒ‡å¼•ï¼šæ˜æ´ç«™ â” å—å±±é€æ˜é›»æ¢¯</h4>
        <svg viewBox="0 0 300 120" className="w-full h-auto">
          {/* Roads */}
          <path d="M40,100 L260,100" stroke="#e2e8f0" strokeWidth="20" strokeLinecap="round" />
          <path d="M220,100 L220,30" stroke="#e2e8f0" strokeWidth="20" strokeLinecap="round" />
          
          {/* Path Line */}
          <path d="M50,100 L220,100 L220,50" fill="none" stroke="#fb7185" strokeWidth="3" strokeDasharray="6,4" />
          <path d="M215,55 L220,45 L225,55" fill="none" stroke="#fb7185" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round" />

          {/* Start Point: Myeongdong Stn Exit 4 */}
          <circle cx="50" cy="100" r="6" fill="#3b82f6" />
          <text x="50" y="115" fontSize="10" textAnchor="middle" fill="#475569" fontWeight="bold">æ˜æ´ç«™ 4è™Ÿå‡ºå£</text>
          
          {/* Landmark: McDonald's */}
          <circle cx="90" cy="85" r="8" fill="#facc15" stroke="#b45309" strokeWidth="1" />
          <text x="90" y="89" fontSize="10" textAnchor="middle" fill="#b45309" fontWeight="bold">M</text>

          {/* Landmark: Intersection */}
          <text x="235" y="105" fontSize="9" textAnchor="start" fill="#94a3b8">æœƒè³¢åå­—è·¯å£</text>

          {/* Turn Indicator */}
          <path d="M200,90 Q220,90 220,70" fill="none" stroke="#fb7185" strokeWidth="2" markerEnd="url(#arrow)" />

          {/* End Point: Oreumi */}
          <rect x="205" y="20" width="30" height="30" rx="4" fill="#10b981" />
          <text x="220" y="40" fontSize="16" textAnchor="middle" fill="white">ğŸ›—</text>
          <text x="250" y="38" fontSize="10" textAnchor="start" fill="#10b981" fontWeight="bold">é€æ˜é›»æ¢¯</text>
        </svg>
      </div>
    );
    
    // 5.2 RealTimeDateDisplay Component
    const RealTimeDateDisplay = () => {
      const [dateStr, setDateStr] = useState('');
      useEffect(() => {
        const updateDate = () => {
          const now = new Date();
          const seoulTime = new Date(now.toLocaleString("en-US", { timeZone: "Asia/Seoul" }));
          const y = seoulTime.getFullYear();
          const m = String(seoulTime.getMonth() + 1).padStart(2, '0');
          const d = String(seoulTime.getDate()).padStart(2, '0');
          const days = ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'];
          const dayName = days[seoulTime.getDay()];
          setDateStr(`${y}/${m}/${d} (${dayName})`);
        };
        updateDate();
        const timer = setInterval(updateDate, 60000);
        return () => clearInterval(timer);
      }, []);
      return <span className="text-sm font-bold text-rose-900/90 mt-0.5 block">{dateStr}</span>;
    };

    // 5.3 ShoppingListContent Component
    const ShoppingListContent = ({ lang }) => {
      const [items, setItems] = useState([]);
      const [newItem, setNewItem] = useState({ name: '', category: '', image: '' });
      const [viewMode, setViewMode] = useState('list');
      const fileInputRef = useRef(null);

      // Separate key for each language
      const storageKey = `seoul2025_shopping_list_v2_${lang}`; 

      useEffect(() => {
        try {
          const saved = localStorage.getItem(storageKey);
          if (saved) setItems(JSON.parse(saved));
        } catch (e) { console.error(e); }
      }, [storageKey]);

      useEffect(() => {
        localStorage.setItem(storageKey, JSON.stringify(items));
      }, [items, storageKey]);

      const handleAddItem = () => {
        if (!newItem.name) return;
        setItems([...items, { ...newItem, id: Date.now(), checked: false }]);
        setNewItem({ name: '', category: '', image: '' });
      };

      const handleDeleteItem = (id) => {
        if (!confirm('Delete?')) return;
        setItems(items.filter(i => i.id !== id));
      };

      const toggleItemCheck = (id) => {
        setItems(items.map(i => i.id === id ? { ...i, checked: !i.checked } : i));
      };

      const handleFileChange = (e) => {
        const file = e.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onloadend = () => {
            setNewItem(prev => ({ ...prev, image: reader.result }));
          };
          reader.readAsDataURL(file);
        }
      };

      return (
          <div className="flex flex-col h-full bg-white rounded-2xl shadow-sm border border-stone-100 overflow-hidden">
            <div className="bg-gradient-to-r from-rose-300 to-rose-400 p-3 text-white font-bold text-center flex justify-between items-center shrink-0">
              <div className="flex items-center gap-2 text-sm"><ShoppingBag size={18} /> {UI_LABELS[lang].shoppingList}</div>
              <div className="flex gap-1">
                 <button onClick={() => setViewMode('list')} className={`p-1 rounded ${viewMode === 'list' ? 'bg-white/20' : ''}`}><List size={16}/></button>
                 <button onClick={() => setViewMode('grid')} className={`p-1 rounded ${viewMode === 'grid' ? 'bg-white/20' : ''}`}><LayoutGrid size={16}/></button>
              </div>
            </div>
            
            <div className="p-3 overflow-y-auto flex-1 min-h-[300px]">
               {viewMode === 'list' ? (
                 <div className="space-y-2">
                   {items.map(item => (
                     <div key={item.id} className={`flex items-center p-2 rounded-lg border ${item.checked ? 'bg-gray-50 border-gray-100' : 'bg-white border-rose-100'}`}>
                        <input type="checkbox" checked={item.checked} onChange={() => toggleItemCheck(item.id)} className="w-4 h-4 mr-3 accent-rose-400" />
                        {item.image && <img src={item.image} className="w-10 h-10 rounded object-cover mr-3 border" alt="item" />}
                        <div className="flex-1 min-w-0">
                           <div className={`font-bold text-sm truncate ${item.checked ? 'line-through text-gray-400' : 'text-gray-800'}`}>{item.name}</div>
                           <div className="text-xs text-gray-500 truncate">{item.category}</div>
                        </div>
                        <button onClick={() => handleDeleteItem(item.id)} className="text-gray-300 hover:text-red-400 ml-2"><Trash2 size={14}/></button>
                     </div>
                   ))}
                 </div>
               ) : (
                 <div className="grid grid-cols-2 gap-2">
                    {items.map(item => (
                      <div key={item.id} className={`relative rounded-xl border overflow-hidden aspect-square group ${item.checked ? 'opacity-60' : ''}`}>
                         {item.image ? (
                            <img src={item.image} className="w-full h-full object-cover" alt={item.name} />
                         ) : (
                            <div className="w-full h-full bg-rose-50 flex items-center justify-center text-rose-200"><ShoppingBag size={32}/></div>
                         )}
                         <div className="absolute bottom-0 left-0 right-0 bg-black/60 p-1.5 text-white">
                            <div className="text-xs font-bold truncate">{item.name}</div>
                            <div className="text-[10px] opacity-80 truncate">{item.category}</div>
                         </div>
                         <input type="checkbox" checked={item.checked} onChange={() => toggleItemCheck(item.id)} className="absolute top-2 right-2 w-4 h-4 accent-rose-400" />
                         <button onClick={() => handleDeleteItem(item.id)} className="absolute top-2 left-2 text-white/80 hover:text-red-400"><Trash2 size={14}/></button>
                      </div>
                    ))}
                 </div>
               )}
               {items.length === 0 && <div className="text-center text-gray-400 py-10 text-sm">å°šç„¡å•†å“</div>}
            </div>

            <div className="p-3 border-t bg-gray-50 shrink-0 space-y-2">
                <div className="flex gap-2">
                   <input className="flex-1 border rounded p-2 text-xs outline-none focus:ring-1 focus:ring-rose-300" placeholder={UI_LABELS[lang].shoppingName} value={newItem.name} onChange={e => setNewItem({...newItem, name: e.target.value})} />
                   <input className="w-1/3 border rounded p-2 text-xs outline-none focus:ring-1 focus:ring-rose-300" placeholder={UI_LABELS[lang].shoppingCategory} value={newItem.category} onChange={e => setNewItem({...newItem, category: e.target.value})} />
                </div>
                <div className="flex gap-2">
                   <div className="flex-1 flex items-center border rounded bg-white px-2">
                      <input className="flex-1 text-xs outline-none bg-transparent" placeholder={UI_LABELS[lang].shoppingImage} value={newItem.image} onChange={e => setNewItem({...newItem, image: e.target.value})} />
                      <button onClick={() => fileInputRef.current?.click()} className="p-1 text-gray-500 hover:text-rose-500"><ImageIcon size={16}/></button>
                      <input type="file" ref={fileInputRef} className="hidden" accept="image/*" onChange={handleFileChange} />
                   </div>
                   <button onClick={handleAddItem} disabled={!newItem.name} className="bg-rose-400 text-white px-3 rounded font-bold text-xs disabled:opacity-50 whitespace-nowrap">{UI_LABELS[lang].shoppingAdd}</button>
                </div>
            </div>
          </div>
      );
    };

    // 5.4 Other Components
    const IconType = ({ type, className }) => {
      const icons = { 
        checklist: ClipboardCheck, warning: AlertTriangle, warning_red: AlertTriangle, doc: FileText, ses: Scan, 
        flight: Plane, arrival: Plane, bus: Bus, car: Car, train: Train, food: Utensils, music: Music, sight: Camera, shopping: ShoppingBag, hotel: BedDouble, ship: Ship, walk: Footprints, show: Ticket, home: Home, default: MapPin 
      };
      const Icon = icons[type] || icons.default;
      return <Icon className={`${className} ${type === 'arrival' ? 'rotate-90' : ''} ${type === 'warning_red' ? 'text-red-500' : ''} ${type === 'warning' ? 'text-amber-500' : ''} ${type === 'ses' ? 'text-blue-500' : ''}`} />;
    };

    const TransportDisplay = ({ text }) => {
      if (!text) return null;
      const rawSteps = text.split(/\s*->\s*/).filter(s => s.trim());
      const isSubwayRoute = text.includes('->');

      if (!isSubwayRoute) {
         return (
             <div className="text-xs text-stone-500 mt-1 flex flex-wrap gap-1">
                 {text.split(/([0-9]+è™Ÿç·š|Line\s*[0-9]+|AREX|[0-9]+í˜¸ì„ |[0-9]+å·ç·š)/g).map((part, i) => {
                    const match = part.match(/([0-9]+)(?:è™Ÿç·š|Line|í˜¸ì„ |å·ç·š)|(AREX)/i);
                    if(match) {
                        const k = match[2] ? 'AREX' : match[1];
                        return <span key={i} className="px-1.5 py-0.5 rounded text-white text-[10px] font-bold" style={{backgroundColor: SUBWAY_COLORS[k] || '#999'}}>{part}</span>;
                    }
                    return <span key={i}>{part}</span>;
                 })}
             </div>
         );
      }

      return (
        <div className="mt-3 ml-2">
          {rawSteps.map((step, idx) => {
            const lineMatch = step.match(/(\d+)(?:è™Ÿç·š|å·ç·š|í˜¸ì„ )|Line\s*(\d+)|(AREX)/i);
            let lineColor = '#e5e7eb';
            let isLineStep = false;
            let lineLabel = '';

            if (lineMatch) {
               const lineCode = lineMatch[3] ? 'AREX' : (lineMatch[1] || lineMatch[2]);
               if(SUBWAY_COLORS[lineCode]) {
                   lineColor = SUBWAY_COLORS[lineCode];
                   isLineStep = true;
                   lineLabel = lineMatch[3] ? 'A' : (lineMatch[1] || lineMatch[2]);
               }
            } else if (idx > 0) {
               for(let i=idx-1; i>=0; i--) {
                   const prevMatch = rawSteps[i].match(/(\d+)(?:è™Ÿç·š|å·ç·š|í˜¸ì„ )|Line\s*(\d+)|(AREX)/i);
                   if(prevMatch) {
                       const k = prevMatch[3] ? 'AREX' : (prevMatch[1] || prevMatch[2]);
                       if(SUBWAY_COLORS[k]) {
                           lineColor = SUBWAY_COLORS[k];
                           break; 
                       }
                   }
               }
            }
            
            // Special handling for start/end points if no line detected
            if (!isLineStep) {
               if (idx === 0) {
                  lineColor = '#3b82f6'; // Blue for Start
                  lineLabel = 'èµ·';
               } else if (idx === rawSteps.length - 1) {
                  lineColor = '#ef4444'; // Red for End
                  lineLabel = 'çµ‚';
               }
            }

            const isLast = idx === rawSteps.length - 1;
            let mainText = step;
            let subText = "";
            const parenMatch = step.match(/^(.*?)\s*(\(.*\))$/);
            if(parenMatch) {
                mainText = parenMatch[1];
                subText = parenMatch[2];
            }

            return (
              <div key={idx} className="relative flex items-start pb-6 last:pb-0 group">
                {!isLast && (
                  <div className="absolute left-[9px] top-4 h-full w-0.5" style={{ backgroundColor: lineColor, opacity: 0.3 }}></div>
                )}
                <div 
                    className="relative z-10 w-5 h-5 rounded-full border-2 border-white shadow-sm shrink-0 mt-0.5 flex items-center justify-center text-[10px] font-bold text-white transition-transform hover:scale-110"
                    style={{ backgroundColor: lineColor }}
                >
                  {lineLabel || <div className="w-1.5 h-1.5 bg-white rounded-full"></div>}
                </div>
                <div className="ml-3">
                    <div className={`text-sm ${lineLabel && lineLabel !== 'èµ·' && lineLabel !== 'çµ‚' ? 'font-bold text-stone-800' : 'text-stone-600'}`}>
                        {mainText}
                    </div>
                    {subText && (
                        <div className="text-[11px] text-stone-500 font-medium mt-0.5">
                            {subText}
                        </div>
                    )}
                </div>
              </div>
            );
          })}
        </div>
      );
    };

    const ActivityWeather = ({ day, index, location }) => {
      const isTaiwan = location && ['Home', 'TPE', 'Taipei', 'Taiwan', 'Taoyuan', 'å®¶', 'æ¡ƒåœ’', 'å°åŒ—', 'å°ç£'].some(k => location.includes(k));
      const seed = day * 10 + index;
      let weatherTypes, temp;
      if (isTaiwan) {
        weatherTypes = ['sunny', 'cloudy', 'rain']; 
        temp = Math.floor((seed * 9301 + 49297) % 8) + 15;
      } else {
        weatherTypes = ['sunny', 'cloudy', 'snow'];
        temp = Math.floor((seed * 9301 + 49297) % 15) - 10; 
      }
      const type = weatherTypes[seed % weatherTypes.length];
      const getIcon = () => {
        if (type === 'sunny') return <Sun className="w-3 h-3 text-amber-400" />;
        if (type === 'snow') return <Snowflake className="w-3 h-3 text-sky-300" />;
        if (type === 'rain') return <CloudRain className="w-3 h-3 text-slate-400" />;
        return <Cloud className="w-3 h-3 text-slate-400" />;
      };
      return (
        <div className="flex items-center gap-1 text-[10px] font-medium text-stone-500 bg-stone-50 px-1.5 py-0.5 rounded-full shrink-0 ml-2">
          {getIcon()}
          <span>{temp}Â°</span>
        </div>
      );
    };

    const TimeWeatherWidget = () => {
      const [time, setTime] = useState(new Date());
      const [temp, setTemp] = useState(-2);
      const [condition, setCondition] = useState('cloudy');
      useEffect(() => { const t = setInterval(() => setTime(new Date()), 1000); return () => clearInterval(t); }, []);
      const seoulTime = new Date(time.toLocaleString("en-US", { timeZone: "Asia/Seoul" }));
      const getIcon = () => {
        if (condition === 'sunny') return <Sun className="w-4 h-4 text-amber-400" />;
        if (condition === 'snow') return <Snowflake className="w-4 h-4 text-sky-300" />;
        return <Cloud className="w-4 h-4 text-slate-400" />;
      };
      return (
        <div className="flex flex-col items-end gap-1">
           <div className="flex items-center gap-2 bg-white/80 backdrop-blur-md px-3 py-1 md:px-4 md:py-2 rounded-2xl shadow-sm border border-rose-100">
             <div className="flex flex-col items-end border-r border-rose-100 pr-2 md:pr-4">
               <span className="text-[8px] md:text-[10px] text-rose-800 font-bold tracking-wider">SEOUL</span>
               <span className="text-lg md:text-xl font-mono font-bold text-rose-900 leading-none">{seoulTime.getHours().toString().padStart(2,'0')}:{seoulTime.getMinutes().toString().padStart(2,'0')}</span>
             </div>
             <div className="flex items-center gap-2">{getIcon()}<span className="text-lg font-bold text-stone-700">{temp}Â°C</span></div>
           </div>
        </div>
      );
    };

    const EditableText = ({ text, className, multiline = false, onSave }) => {
      const [isEditing, setIsEditing] = useState(false);
      const [value, setValue] = useState(text);
      useEffect(() => setValue(text), [text]);
      const handleBlur = () => { setIsEditing(false); onSave(value); };
      if (isEditing) return multiline ? <textarea autoFocus className={`w-full bg-white border border-rose-300 rounded p-2 focus:ring-2 focus:ring-rose-400 outline-none text-stone-700 ${className}`} value={value} onChange={(e) => setValue(e.target.value)} onBlur={handleBlur} rows={3} /> : <input autoFocus type="text" className={`w-full bg-white border border-rose-300 rounded px-1 focus:ring-2 focus:ring-rose-400 outline-none text-stone-700 ${className}`} value={value} onChange={(e) => setValue(e.target.value)} onBlur={handleBlur} />;
      return <div onClick={() => setIsEditing(true)} className={`cursor-pointer hover:bg-rose-50/50 rounded px-1 transition-colors border border-transparent hover:border-rose-100 group relative ${className}`}>{value}<Edit3 className="w-3 h-3 text-rose-300 absolute -right-4 top-1 opacity-0 group-hover:opacity-100 transition-opacity" /></div>;
    };

    const MagicPhraseModal = ({ activity, lang, onClose, onSavePhrases }) => {
      const [phrases, setPhrases] = useState([]);
      const [isAdding, setIsAdding] = useState(false);
      const [newMeaning, setNewMeaning] = useState('');
      const [newKorean, setNewKorean] = useState('');
      const [newPronunciation, setNewPronunciation] = useState('');
      
      useEffect(() => {
        const fallback = getFallbackPhrases(activity.type, lang);
        const custom = activity.customPhrases || [];
        setPhrases([...custom, ...fallback]);
      }, [activity, lang]);

      const handleAddPhrase = () => {
        if (!newMeaning || !newKorean) return;
        const newPhrase = { meaning: newMeaning, korean: newKorean, pronunciation: newPronunciation };
        const updatedCustom = [...(activity.customPhrases || []), newPhrase];
        
        onSavePhrases(updatedCustom); 
        setPhrases([...updatedCustom, ...getFallbackPhrases(activity.type, lang)]);
        
        setNewMeaning('');
        setNewKorean('');
        setNewPronunciation('');
        setIsAdding(false);
      };

      const handleDeletePhrase = (index) => {
        const customCount = (activity.customPhrases || []).length;
        if (index < customCount) {
             const updatedCustom = [...(activity.customPhrases || [])];
             updatedCustom.splice(index, 1);
             onSavePhrases(updatedCustom);
             setPhrases([...updatedCustom, ...getFallbackPhrases(activity.type, lang)]);
        }
      };

      const speak = (text) => {
        window.speechSynthesis.cancel();
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = 'ko-KR';
        utterance.rate = 0.9;
        window.speechSynthesis.speak(utterance);
      };

      const handleTranslate = () => {
        if (!newMeaning) return;
        const slMap = { ZH: 'zh-TW', KR: 'ko', EN: 'en', JP: 'ja' };
        const sl = slMap[lang] || 'auto';
        window.open(`https://translate.google.com/?sl=${sl}&tl=ko&text=${encodeURIComponent(newMeaning)}&op=translate`, '_blank');
      };

      return (
        <div className="fixed inset-0 bg-black/40 backdrop-blur-sm z-[60] flex items-center justify-center p-4" onClick={onClose}>
          <div className="bg-white rounded-3xl shadow-2xl max-w-sm w-full overflow-hidden animate-fade-in flex flex-col max-h-[80vh]" onClick={(e) => e.stopPropagation()}>
            <div className="bg-gradient-to-r from-rose-300 to-rose-400 p-4 flex justify-between items-center text-white shrink-0">
              <div className="flex items-center gap-2"><Languages size={20} /><div><h3 className="font-bold text-sm">{UI_LABELS[lang].phrasesTitle}</h3><p className="text-[10px] opacity-90 truncate max-w-[200px]">{activity.title}</p></div></div>
              <button onClick={onClose}><X size={20} /></button>
            </div>
            <div className="p-4 overflow-y-auto flex-1 space-y-3">
              {phrases.map((p, i) => (
                <div key={i} className="bg-rose-50 rounded-xl p-3 border border-rose-100 flex justify-between items-center gap-2 relative group">
                  <div className="flex-1"><span className="font-bold text-rose-900 block">{p.korean}</span><div className="text-xs text-rose-600/80">{p.pronunciation}</div><div className="text-sm text-stone-600">{p.meaning}</div></div>
                  <div className="flex flex-col gap-1">
                    <button onClick={() => speak(p.korean)} className="p-2 bg-white text-rose-400 rounded-full shadow-sm"><Volume2 size={18} /></button>
                    {i < (activity.customPhrases || []).length && (
                        <button onClick={() => handleDeletePhrase(i)} className="p-2 bg-white text-red-400 rounded-full shadow-sm"><Trash2 size={18} /></button>
                    )}
                  </div>
                </div>
              ))}
            </div>
            
            <div className="p-3 border-t bg-stone-50 shrink-0">
                {!isAdding ? (
                    <button 
                        onClick={() => setIsAdding(true)}
                        className="w-full py-2 rounded-xl border-2 border-dashed border-rose-200 text-rose-400 font-bold text-sm hover:bg-rose-50 hover:border-rose-300 transition-colors flex items-center justify-center gap-1"
                    >
                        <Plus size={16} /> {UI_LABELS[lang].addPhrase || 'æ–°å¢è‡ªè¨‚çŸ­å¥'}
                    </button>
                ) : (
                    <div className="space-y-2 animate-fade-in">
                        <div className="flex justify-between items-center mb-1">
                            <div className="text-xs font-bold text-stone-500">æ–°å¢è‡ªè¨‚çŸ­å¥</div>
                            <button onClick={() => setIsAdding(false)} className="text-stone-400 hover:text-stone-600"><XCircle size={16}/></button>
                        </div>
                        <div className="flex gap-2">
                            <input className="flex-1 border rounded p-1.5 text-sm outline-none focus:ring-1 focus:ring-rose-300" placeholder={UI_LABELS[lang].phraseMeaningPlaceholder} value={newMeaning} onChange={e => setNewMeaning(e.target.value)} />
                            <button onClick={handleTranslate} className="bg-blue-100 text-blue-600 px-2 rounded text-xs flex items-center gap-1 whitespace-nowrap"><Search size={12}/> ç¿»è­¯</button>
                        </div>
                        <input className="w-full border rounded p-1.5 text-sm outline-none focus:ring-1 focus:ring-rose-300" placeholder="éŸ“æ–‡ (è²¼ä¸Šç¿»è­¯çµæœ)" value={newKorean} onChange={e => setNewKorean(e.target.value)} />
                        <input className="w-full border rounded p-1.5 text-sm outline-none focus:ring-1 focus:ring-rose-300" placeholder="ç™¼éŸ³ (é¸å¡«)" value={newPronunciation} onChange={e => setNewPronunciation(e.target.value)} />
                        <div className="flex gap-2">
                            <button onClick={() => setIsAdding(false)} className="flex-1 bg-stone-200 text-stone-600 py-2 rounded-lg font-bold text-sm">å–æ¶ˆ</button>
                            <button onClick={handleAddPhrase} disabled={!newMeaning || !newKorean} className="flex-1 bg-rose-400 text-white py-2 rounded-lg font-bold text-sm disabled:opacity-50">ç¢ºèªæ–°å¢</button>
                        </div>
                    </div>
                )}
            </div>
          </div>
        </div>
      );
    };

    const AIChatWidget = ({ itinerary, lang }) => {
      const [isOpen, setIsOpen] = useState(false);
      const [messages, setMessages] = useState([]);
      const [input, setInput] = useState("");
      const [loading, setLoading] = useState(false);
      const scrollRef = useRef(null);
      useEffect(() => { if (scrollRef.current) scrollRef.current.scrollTop = scrollRef.current.scrollHeight; }, [messages, isOpen]);
      const handleSend = async () => {
        if (!input.trim()) return;
        const userMsg = { role: 'user', text: input };
        setMessages(prev => [...prev, userMsg]);
        setInput("");
        setLoading(true);
        const result = await callGeminiAPI(input, `You are a Seoul guide. Context: ${JSON.stringify(itinerary)}. Lang: ${lang}. Keep it short.`);
        setMessages(prev => [...prev, { role: 'model', text: result.success ? result.data : "Network error." }]);
        setLoading(false);
      };
      return (
        <>
          {!isOpen && <button onClick={() => setIsOpen(true)} className="fixed bottom-6 right-6 bg-gradient-to-br from-rose-400 to-rose-500 text-white p-4 rounded-full shadow-lg hover:scale-105 transition-all z-40"><Bot size={28} /></button>}
          {isOpen && (
            <div className="fixed bottom-6 right-6 w-[90vw] md:w-[380px] h-[500px] bg-white rounded-3xl shadow-2xl z-50 flex flex-col overflow-hidden border border-rose-100 animate-fade-in">
              <div className="bg-gradient-to-r from-rose-400 to-rose-500 p-4 flex justify-between text-white"><div className="flex gap-2 items-center"><Sparkles size={18} /><h3>{UI_LABELS[lang].aiChat}</h3></div><button onClick={() => setIsOpen(false)}><X size={20} /></button></div>
              <div className="flex-1 overflow-y-auto p-4 space-y-4 bg-stone-50" ref={scrollRef}>
                {messages.map((m, i) => (<div key={i} className={`flex ${m.role === 'user' ? 'justify-end' : 'justify-start'}`}><div className={`max-w-[85%] rounded-2xl p-3 text-sm ${m.role === 'user' ? 'bg-rose-400 text-white' : 'bg-white shadow-sm'}`}>{m.text}</div></div>))}
                {loading && <Loader2 className="animate-spin text-rose-400" />}
              </div>
              <div className="p-3 border-t"><div className="flex gap-2 bg-stone-100 rounded-full px-4 py-2"><input className="flex-1 bg-transparent outline-none text-sm" value={input} onChange={e => setInput(e.target.value)} onKeyDown={e => e.key === 'Enter' && handleSend()} placeholder={UI_LABELS[lang].chatPlaceholder} /><button onClick={handleSend}><Send size={18} className="text-rose-400" /></button></div></div>
            </div>
          )}
        </>
      );
    };

    const AddEventModal = ({ onClose, onSave, lang }) => {
      const [time, setTime] = useState('');
      const [title, setTitle] = useState('');
      const handleSave = () => { if (!title) return; onSave(time || '00:00', title); };
      return (
        <div className="fixed inset-0 bg-black/50 backdrop-blur-sm z-[80] flex items-center justify-center p-4">
          <div className="bg-white rounded-2xl shadow-2xl w-full max-w-sm overflow-hidden animate-fade-in">
            <div className="bg-rose-400 p-4 text-white font-bold text-center">{UI_LABELS[lang].addModalTitle}</div>
            <div className="p-5 space-y-4">
              <div><label className="block text-xs text-stone-500 mb-1">{UI_LABELS[lang].addModalTime}</label><input type="time" className="w-full border border-stone-200 rounded-lg p-2 text-stone-700 outline-none focus:ring-2 focus:ring-rose-300" value={time} onChange={(e) => setTime(e.target.value)} /></div>
              <div><label className="block text-xs text-stone-500 mb-1">{UI_LABELS[lang].addModalContent}</label><input type="text" className="w-full border border-stone-200 rounded-lg p-2 text-stone-700 outline-none focus:ring-2 focus:ring-rose-300" value={title} onChange={(e) => setTitle(e.target.value)} /></div>
              <div className="flex gap-3 pt-2"><button onClick={onClose} className="flex-1 py-2 rounded-lg bg-stone-100 text-stone-600 font-bold text-sm">{UI_LABELS[lang].addModalCancel}</button><button onClick={handleSave} className="flex-1 py-2 rounded-lg bg-rose-400 text-white font-bold text-sm shadow-md">{UI_LABELS[lang].addModalSubmit}</button></div>
            </div>
          </div>
        </div>
      );
    };

    const SplitBillModal = ({ onClose, lang }) => {
      const [partners, setPartners] = useState('');
      const [expenses, setExpenses] = useState([]);
      const [newExpense, setNewExpense] = useState({ payer: '', amount: '', description: '' });
      const [result, setResult] = useState(null);
      const [rate, setRate] = useState(0.023); 

      useEffect(() => {
        const saved = localStorage.getItem('seoul2025_split_bill');
        if (saved) {
          const data = JSON.parse(saved);
          setPartners(data.partners || '');
          setExpenses(data.expenses || []);
        }
      }, []);

      useEffect(() => {
        localStorage.setItem('seoul2025_split_bill', JSON.stringify({ partners, expenses }));
      }, [partners, expenses]);

      const handleAddExpense = () => {
        if (!newExpense.payer || !newExpense.amount) return;
        setExpenses([...expenses, { ...newExpense, id: Date.now() }]);
        setNewExpense({ ...newExpense, amount: '', description: '' });
      };

      const handleCalculate = () => {
        const people = partners.split(/[,ï¼Œ]/).map(p => p.trim()).filter(p => p);
        if (people.length < 2) return;
        const balances = {};
        people.forEach(p => balances[p] = 0);
        let totalSpent = 0;
        expenses.forEach(e => {
          if (balances[e.payer] !== undefined) {
            balances[e.payer] += parseFloat(e.amount);
            totalSpent += parseFloat(e.amount);
          }
        });
        const average = totalSpent / people.length;
        const debts = [];
        const details = people.map(p => ({ name: p, balance: balances[p] - average }));
        let debtors = details.filter(d => d.balance < -0.01).sort((a, b) => a.balance - b.balance);
        let creditors = details.filter(d => d.balance > 0.01).sort((a, b) => b.balance - a.balance);
        let i = 0, j = 0;
        while (i < debtors.length && j < creditors.length) {
          const debtor = debtors[i];
          const creditor = creditors[j];
          const amount = Math.min(Math.abs(debtor.balance), creditor.balance);
          debts.push({ from: debtor.name, to: creditor.name, amount: amount.toFixed(0) });
          debtor.balance += amount;
          creditor.balance -= amount;
          if (Math.abs(debtor.balance) < 0.01) i++;
          if (creditor.balance < 0.01) j++;
        }
        setResult(debts);
      };

      const peopleList = partners.split(/[,ï¼Œ]/).map(p => p.trim()).filter(p => p);
      const totalAmount = expenses.reduce((acc, curr) => acc + (parseFloat(curr.amount) || 0), 0);
      const perPerson = peopleList.length > 0 ? totalAmount / peopleList.length : 0;

      return (
        <div className="fixed inset-0 bg-black/50 backdrop-blur-sm z-[80] flex items-center justify-center p-4" onClick={onClose}>
          <div className="bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden animate-fade-in flex flex-col max-h-[80vh]" onClick={e => e.stopPropagation()}>
            <div className="bg-[#FF7F50] p-4 text-white font-bold text-center flex justify-between items-center">
              <div className="flex items-center gap-2"><Banknote size={20} /> {UI_LABELS[lang].splitBill}</div>
              <button onClick={onClose}><X size={20} /></button>
            </div>
            <div className="p-4 overflow-y-auto flex-1 space-y-4">
              <div className="flex gap-2">
                  <div className="flex-1">
                    <label className="block text-xs text-stone-500 mb-1">æ—…è¡Œä¼™ä¼´ (ç”¨é€—è™Ÿåˆ†éš”)</label>
                    <input type="text" className="w-full border border-stone-200 rounded-lg p-2 text-sm" placeholder="å°æ˜, å°ç¾" value={partners} onChange={e => setPartners(e.target.value)} />
                  </div>
                  <div className="w-24">
                     <label className="block text-xs text-stone-500 mb-1">{UI_LABELS[lang].rate} (KRW->TWD)</label>
                     <input type="number" step="0.001" className="w-full border border-stone-200 rounded-lg p-2 text-sm" value={rate} onChange={e => setRate(e.target.value)} />
                  </div>
              </div>
              
              <div className="bg-stone-50 p-3 rounded-xl flex justify-between items-center text-sm">
                  <div>
                      <div className="text-stone-500 text-xs">{UI_LABELS[lang].total}</div>
                      <div className="font-bold text-lg">â‚©{totalAmount.toLocaleString()} <span className="text-xs font-normal text-stone-400">(â‰ˆNT${(totalAmount * rate).toFixed(0)})</span></div>
                  </div>
                  <div className="text-right">
                      <div className="text-stone-500 text-xs">{UI_LABELS[lang].perPerson}</div>
                      <div className="font-bold text-lg">â‚©{perPerson.toFixed(0)} <span className="text-xs font-normal text-stone-400">(â‰ˆNT${(perPerson * rate).toFixed(0)})</span></div>
                  </div>
              </div>

              {peopleList.length > 0 && (
                <div className="bg-stone-50 p-3 rounded-xl space-y-2 border border-stone-100">
                  <div className="flex gap-2">
                    <select className="flex-1 border rounded-lg p-1.5 text-sm" value={newExpense.payer} onChange={e => setNewExpense({...newExpense, payer: e.target.value})}>
                      <option value="">èª°ä»˜éŒ¢?</option>
                      {peopleList.map(p => <option key={p} value={p}>{p}</option>)}
                    </select>
                    <input type="number" className="w-24 border rounded-lg p-1.5 text-sm" placeholder="é‡‘é¡" value={newExpense.amount} onChange={e => setNewExpense({...newExpense, amount: e.target.value})} />
                  </div>
                  <div className="flex gap-2">
                    <input type="text" className="flex-1 border rounded-lg p-1.5 text-sm" placeholder="é …ç›® (å¯é¸)" value={newExpense.description} onChange={e => setNewExpense({...newExpense, description: e.target.value})} />
                    <button onClick={handleAddExpense} className="bg-[#FF7F50] text-white px-3 rounded-lg text-sm font-bold">+</button>
                  </div>
                </div>
              )}
              <div className="space-y-1 max-h-40 overflow-y-auto">
                {expenses.map((ex, idx) => (
                  <div key={ex.id} className="flex justify-between text-sm p-2 bg-white border rounded-lg items-center">
                    <span><span className="font-bold text-orange-600">{ex.payer}</span> ä»˜äº† {ex.amount} {ex.description && `(${ex.description})`}</span>
                    <button onClick={() => setExpenses(expenses.filter(e => e.id !== ex.id))} className="text-stone-400 hover:text-red-400"><Trash2 size={14}/></button>
                  </div>
                ))}
              </div>
              {result && (
                <div className="bg-orange-50 p-3 rounded-xl border border-orange-100">
                  <h4 className="font-bold text-orange-800 text-sm mb-2">çµç®—çµæœï¼š</h4>
                  {result.length === 0 ? <p className="text-sm text-orange-600">ç›®å‰æ²’æœ‰äººéœ€è¦ä»˜éŒ¢çµ¦èª°</p> : (
                    <ul className="space-y-1 text-sm text-orange-700">
                      {result.map((r, i) => <li key={i}><span className="font-bold">{r.from}</span> çµ¦ <span className="font-bold">{r.to}</span>: â‚©{r.amount} <span className="text-xs text-stone-400">(NT${(r.amount * rate).toFixed(0)})</span></li>)}
                    </ul>
                  )}
                </div>
              )}
            </div>
            <div className="p-4 border-t">
              <button onClick={handleCalculate} className="w-full bg-[#FF7F50] text-white py-3 rounded-xl font-bold shadow-md hover:bg-orange-500">è¨ˆç®—åˆ†å¸³</button>
            </div>
          </div>
        </div>
      );
    };

    function App() {
      const [lang, setLang] = useState('ZH');
      const [activeDay, setActiveDay] = useState(0);
      const [itinerary, setItinerary] = useState(() => loadData('ZH'));
      const [selectedActivity, setSelectedActivity] = useState(null);
      const [showAddEventModal, setShowAddEventModal] = useState(false);
      const [showSplitBill, setShowSplitBill] = useState(false);
      const [showShoppingList, setShowShoppingList] = useState(false);
      
      const touchStartX = useRef(null);
      const onTouchStart = e => touchStartX.current = e.targetTouches[0].clientX;
      const onTouchEnd = e => { if (!touchStartX.current) return; const diff = touchStartX.current - e.changedTouches[0].clientX; if (diff > 50 && activeDay < itinerary.length - 1) setActiveDay(p => p + 1); if (diff < -50 && activeDay > 0) setActiveDay(p => p - 1); };
      const getInitialActiveDay = () => { const now = new Date(); const year = now.getFullYear(); const month = now.getMonth(); const date = now.getDate(); if (year === 2025 && month === 11 && date >= 18 && date <= 24) return date - 18 + 1; return 0; };

      useEffect(() => { setActiveDay(getInitialActiveDay()); }, []);
      
      // Auto-save effect
      useEffect(() => { 
        if(itinerary && itinerary.length > 0) {
            const key = `seoul_trip_2025_v6_${lang}`; 
            localStorage.setItem(key, JSON.stringify(itinerary)); 
        }
      }, [itinerary, lang]);

      const handleLangChange = (newLang) => {
          setLang(newLang);
          const savedData = loadData(newLang);
          setItinerary(savedData);
      };

      const updateActivity = (d, a, f, v) => { 
        const newItinerary = [...itinerary];
        const newDay = { ...newItinerary[d] };
        const newActivities = [...newDay.activities];
        const newActivity = { ...newActivities[a] };
        newActivity[f] = v;
        newActivities[a] = newActivity;
        newDay.activities = newActivities;
        newItinerary[d] = newDay;
        setItinerary(newItinerary); 
      };
      
      const updateTheme = (d, v) => { 
        const newItinerary = [...itinerary]; 
        newItinerary[d] = { ...newItinerary[d], theme: v };
        setItinerary(newItinerary); 
      };
      
      const handleSaveNewEvent = (time, title) => {
        const newItinerary = [...itinerary];
        const newDay = { ...newItinerary[activeDay] };
        const newActivities = [...newDay.activities];
        newActivities.push({ time: time, title: title, type: 'default', desc: 'é»æ“Šç·¨è¼¯å…§å®¹', location: title, transport: '' });
        newActivities.sort((a, b) => { const tA = a.time || "99:99"; const tB = b.time || "99:99"; return tA.localeCompare(tB); });
        newDay.activities = newActivities;
        newItinerary[activeDay] = newDay;
        setItinerary(newItinerary);
        setShowAddEventModal(false);
      };

      // Handler for updating custom phrases in a specific activity
      const handleUpdatePhrases = (activityIndex, newCustomPhrases) => {
          const newItinerary = [...itinerary];
          const newDay = { ...newItinerary[activeDay] };
          const newActivities = [...newDay.activities];
          const newActivity = { ...newActivities[activityIndex] };
          
          newActivity.customPhrases = newCustomPhrases;
          
          newActivities[activityIndex] = newActivity;
          newDay.activities = newActivities;
          newItinerary[activeDay] = newDay;
          setItinerary(newItinerary);
      };
      
      const toggleCheck = (dayIdx, actIdx, itemIdx) => {
        const newItinerary = [...itinerary];
        const newDay = { ...newItinerary[dayIdx] };
        const newActivities = [...newDay.activities];
        const newActivity = { ...newActivities[actIdx] };
        const newItems = [...newActivity.items];
        newItems[itemIdx] = { ...newItems[itemIdx], checked: !newItems[itemIdx].checked };
        newActivity.items = newItems;
        newActivities[actIdx] = newActivity;
        newDay.activities = newActivities;
        newItinerary[dayIdx] = newDay;
        setItinerary(newItinerary);
      };

      const updateChecklistItemText = (dayIdx, actIdx, itemIdx, text) => {
        const newItinerary = [...itinerary];
        const newDay = { ...newItinerary[dayIdx] };
        const newActivities = [...newDay.activities];
        const newActivity = { ...newActivities[actIdx] };
        const newItems = [...newActivity.items];
        newItems[itemIdx] = { ...newItems[itemIdx], text: text };
        newActivity.items = newItems;
        newActivities[actIdx] = newActivity;
        newDay.activities = newActivities;
        newItinerary[dayIdx] = newDay;
        setItinerary(newItinerary);
      };

      const addChecklistItem = (dayIdx, actIdx) => {
        const newItinerary = [...itinerary];
        const newDay = { ...newItinerary[dayIdx] };
        const newActivities = [...newDay.activities];
        const newActivity = { ...newActivities[actIdx] };
        const newItems = [...newActivity.items];
        newItems.push({ text: 'é»æ“Šç·¨è¼¯æ–°é …ç›®', checked: false });
        newActivity.items = newItems;
        newActivities[actIdx] = newActivity;
        newDay.activities = newActivities;
        newItinerary[dayIdx] = newDay;
        setItinerary(newItinerary);
      };

      const deleteChecklistItem = (dayIdx, actIdx, itemIdx) => {
        if (!confirm('ç¢ºå®šåˆªé™¤æ­¤é …ç›®ï¼Ÿ')) return;
        const newItinerary = [...itinerary];
        const newDay = { ...newItinerary[dayIdx] };
        const newActivities = [...newDay.activities];
        const newActivity = { ...newActivities[actIdx] };
        const newItems = [...newActivity.items];
        newItems.splice(itemIdx, 1);
        newActivity.items = newItems;
        newActivities[actIdx] = newActivity;
        newDay.activities = newActivities;
        newItinerary[dayIdx] = newDay;
        setItinerary(newItinerary);
      };

      const currentDay = itinerary[activeDay];

      return (
        <div className="min-h-screen bg-[#fdf8f9] font-sans pb-20 relative">
          <header className="sticky top-0 z-40 bg-[#fdf8f9]/90 backdrop-blur-lg border-b border-rose-100 shadow-sm">
            <div className="max-w-3xl mx-auto px-4 pt-3 pb-0"> 
              <div className="flex flex-row justify-between items-start gap-2 mb-1">
                <div className="flex flex-col items-start gap-1 min-w-0">
                  <h1 className="text-xl md:text-3xl font-bold text-rose-950 tracking-tight truncate w-full">{UI_LABELS[lang].title}</h1>
                  {UI_LABELS[lang].subtitle && <span className="text-xs md:text-sm text-rose-700/70 truncate w-full">{UI_LABELS[lang].subtitle}</span>}
                  <RealTimeDateDisplay />
                </div>
                <div className="flex flex-col items-end gap-2 shrink-0">
                   <TimeWeatherWidget />
                   <div className="flex items-center gap-2">
                     {/* Shopping List Tab Button */}
                     <button onClick={() => setShowShoppingList(true)} className="p-1.5 bg-rose-100 text-rose-600 rounded-full hover:bg-rose-200 transition-colors"><ShoppingBag size={16} /></button>
                     <button onClick={() => setShowSplitBill(true)} className="p-1.5 bg-[#FF7F50] text-white rounded-full hover:bg-[#ff6b35] transition-colors"><Banknote size={16} /></button>
                     <div className="flex bg-rose-100/50 p-1 rounded-full">{Object.keys(LANGUAGES).map(l => <button key={l} onClick={() => handleLangChange(l)} className={`px-2 py-1 rounded-full text-[10px] font-bold transition-all ${lang === l ? 'bg-white text-rose-600 shadow-sm' : 'text-rose-400'}`}>{l}</button>)}</div>
                   </div>
                </div>
              </div>
            </div>
            <div className="max-w-3xl mx-auto px-2 overflow-x-auto no-scrollbar pb-2">
              <div className="flex space-x-2 py-2 min-w-max">
                {/* Day 0: Prep */}
                <button onClick={() => { setActiveDay(0); setShowShoppingList(false); }} className={`flex flex-col items-center min-w-[4rem] py-2 px-2 rounded-2xl border transition-all ${activeDay === 0 && !showShoppingList ? 'bg-rose-400 border-rose-400 text-white shadow-md scale-105' : 'bg-white border-rose-100 text-stone-400'}`}>
                    <span className="text-[10px] font-bold opacity-80">{UI_LABELS[lang].days[0]}</span>
                    <span className="text-sm font-bold mt-0.5">{itinerary[0].date.split(' ')[0]}</span>
                </button>

                {/* Days 1-7 */}
                {itinerary.slice(1).map((day, idx) => (
                  <button key={idx + 1} onClick={() => { setActiveDay(idx + 1); setShowShoppingList(false); }} className={`flex flex-col items-center min-w-[4rem] py-2 px-2 rounded-2xl border transition-all ${activeDay === (idx + 1) && !showShoppingList ? 'bg-rose-400 border-rose-400 text-white shadow-md scale-105' : 'bg-white border-rose-100 text-stone-400'}`}>
                    <span className="text-[10px] font-bold opacity-80">{UI_LABELS[lang].days[idx + 1]}</span>
                    <span className="text-sm font-bold mt-0.5">{day.date.split(' ')[0]}</span>
                  </button>
                ))}
              </div>
            </div>
          </header>
          
          <main className="max-w-3xl mx-auto px-4 py-4 pb-20 relative min-h-[60vh]" onTouchStart={onTouchStart} onTouchEnd={onTouchEnd}>
            {showShoppingList ? (
                <div className="animate-fade-in h-full">
                    <ShoppingListContent lang={lang} />
                </div>
            ) : (
            <div key={activeDay} className="animate-fade-in">
              <div className="mb-6 pl-2 border-l-4 border-rose-300 flex justify-between items-center">
                <div>
                  <div className="text-stone-400 text-sm font-medium mb-0.5">{currentDay.date}</div>
                  <h2 className="text-xl font-bold text-stone-800"><EditableText text={currentDay.theme} onSave={(v) => updateTheme(activeDay, v)} /></h2>
                </div>
                <div className="flex gap-2">
                  {activeDay !== 0 && activeDay !== 1 && activeDay !== 7 && (
                    <button onClick={() => setShowAddEventModal(true)} className="flex items-center gap-1 text-xs font-bold text-white bg-rose-400 px-3 py-1.5 rounded-full shadow-sm hover:bg-rose-500 transition-colors shrink-0"><Plus size={14} /><span>{UI_LABELS[lang].addEvent}</span></button>
                  )}
                </div>
              </div>
              <div className="relative space-y-6 pl-4 border-l-2 border-rose-100 ml-3">
                {currentDay.activities.map((item, i) => (
                  <div key={i} className="relative group">
                    <div className={`bg-white rounded-2xl p-4 shadow-sm border hover:shadow-md transition-shadow ${item.type.includes('warning') ? 'border-amber-200 bg-amber-50/30' : (item.type === 'checklist' ? 'border-emerald-100' : (item.type === 'ses' ? 'border-blue-200 bg-blue-50/30' : 'border-stone-100'))}`}>
                      {item.type === 'checklist' || item.type.includes('warning') || item.type === 'doc' || item.type === 'ses' ? (
                        <div>
                           <div className="flex items-center gap-2 mb-2">
                              <h3 className={`font-bold text-lg ${item.type.includes('warning') ? 'text-amber-700' : (item.type === 'ses' ? 'text-blue-800' : 'text-stone-800')}`}>{item.title}</h3>
                           </div>
                           <p className="text-sm text-stone-500 mb-3">{item.desc}</p>
                           <ul className="space-y-2">
                             {item.items && item.items.map((subItem, subIdx) => (
                               <li key={subIdx} className="flex items-start gap-2 text-sm text-stone-700 group/item">
                                  {item.type !== 'ses' && (
                                    <input 
                                      type="checkbox" 
                                      checked={subItem.checked || false}
                                      onChange={() => toggleCheck(activeDay, i, subIdx)}
                                      className={`mt-1 w-4 h-4 rounded border-gray-300 focus:ring-rose-400 cursor-pointer ${item.type.includes('warning') ? 'accent-amber-500' : 'accent-emerald-500'}`} 
                                    />
                                  )}
                                  <span className={`flex-1 break-words ${item.type === 'ses' ? 'text-blue-700 font-medium' : (subItem.checked ? 'line-through text-stone-400' : '')}`}>
                                    {item.type === 'ses' ? subItem.text : (
                                      <EditableText 
                                        text={subItem.text} 
                                        onSave={(val) => updateChecklistItemText(activeDay, i, subIdx, val)} 
                                        className="w-full"
                                      />
                                    )}
                                  </span>
                                  {item.type !== 'ses' && (
                                    <button 
                                      onClick={() => deleteChecklistItem(activeDay, i, subIdx)}
                                      className="opacity-0 group-hover/item:opacity-100 text-stone-400 hover:text-red-400 transition-opacity"
                                    >
                                      <Trash2 size={14} />
                                    </button>
                                  )}
                               </li>
                             ))}
                           </ul>
                           {item.type !== 'ses' && (
                             <button 
                               onClick={() => addChecklistItem(activeDay, i)}
                               className="mt-3 text-xs flex items-center gap-1 text-stone-400 hover:text-rose-500 transition-colors"
                             >
                               <Plus size={12} /> {UI_LABELS[lang].addItem}
                             </button>
                           )}
                        </div>
                      ) : (
                        <div>
                          <div className="flex justify-between items-center mb-2 pb-2 border-b border-stone-50">
                            <div className="flex items-center gap-2 overflow-hidden">
                               <div className="bg-rose-100 text-rose-500 rounded-full p-1 shrink-0">
                                 <IconType type={item.type} className="w-3 h-3" />
                               </div>
                               <span className="font-mono text-rose-500 font-bold bg-rose-50 px-1.5 rounded text-sm shrink-0"><EditableText text={item.time} onSave={(v) => updateActivity(activeDay, i, 'time', v)} /></span>
                               <h3 className="font-bold text-stone-800 truncate"><EditableText text={item.title} onSave={(v) => updateActivity(activeDay, i, 'title', v)} /></h3>
                            </div>
                            <ActivityWeather day={activeDay} index={i} location={item.location} />
                          </div>
                          <div className="text-stone-600 text-sm mb-3 leading-relaxed"><EditableText multiline text={item.desc} onSave={(v) => updateActivity(activeDay, i, 'desc', v)} /></div>
                          
                          {/* Visual Path for Namsan Oreumi (Only show if visual property exists) */}
                          {item.visual === 'namsan_path' && <NamsanPathVisual />}
                          
                          {item.link && (
                            <a 
                              href={item.link.url} 
                              target="_blank" 
                              rel="noopener noreferrer"
                              className="flex items-center gap-1 text-indigo-500 hover:text-indigo-600 transition-colors shrink-0 text-xs mt-1 mb-2 w-fit"
                              onClick={(e) => e.stopPropagation()}
                            >
                              <span className="text-base">ğŸŒ</span>
                              <span className="border-b border-transparent hover:border-indigo-500 font-medium">{item.link.text}</span>
                            </a>
                          )}

                          <button 
                            onClick={() => setSelectedActivity({ ...item, index: i })} 
                            className="flex items-center gap-1 text-[10px] font-bold text-rose-500 bg-rose-50 px-2 py-1 rounded hover:bg-rose-100 transition-colors w-fit mb-2"
                          >
                            <Sparkles size={10} />{UI_LABELS[lang].genPhrases}
                          </button>
                          {(item.location || item.transport || item.duration) && (
                            <div className="mt-2 text-stone-500">
                              {/* New Transport Display logic handles both icons and the vertical timeline */}
                              <TransportDisplay text={item.transport} />
                            </div>
                          )}
                        </div>
                      )}

                    </div>
                  </div>
                ))}
              </div>
            </div>
            )}
          </main>

          <AIChatWidget itinerary={itinerary} lang={lang} />
          {selectedActivity && (
            <MagicPhraseModal 
                activity={selectedActivity} 
                lang={lang} 
                onClose={() => setSelectedActivity(null)} 
                onSavePhrases={(newPhrases) => handleUpdatePhrases(selectedActivity.index, newPhrases)}
            />
          )}
          {showAddEventModal && <AddEventModal onClose={() => setShowAddEventModal(false)} onSave={handleSaveNewEvent} lang={lang} />}
          {showSplitBill && <SplitBillModal onClose={() => setShowSplitBill(false)} lang={lang} />}
        </div>
      );
    }

    const root = createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
